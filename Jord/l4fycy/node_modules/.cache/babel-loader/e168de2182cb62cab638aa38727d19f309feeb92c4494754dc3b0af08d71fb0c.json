{"ast":null,"code":"import * as React from 'react';\nimport { useState, useContext, useRef, useLayoutEffect, createContext } from 'react';\nimport { useFrame } from '@react-three/fiber';\nconst context = /* @__PURE__ */createContext(null);\nfunction PerformanceMonitor(_ref) {\n  let {\n    iterations = 10,\n    ms = 250,\n    threshold = 0.75,\n    step = 0.1,\n    factor: _factor = 0.5,\n    flipflops = Infinity,\n    bounds = refreshrate => refreshrate > 100 ? [60, 100] : [40, 60],\n    onIncline,\n    onDecline,\n    onChange,\n    onFallback,\n    children\n  } = _ref;\n  const decimalPlacesRatio = Math.pow(10, 0);\n  const [api, _] = useState(() => ({\n    fps: 0,\n    index: 0,\n    factor: _factor,\n    flipped: 0,\n    refreshrate: 0,\n    fallback: false,\n    frames: [],\n    averages: [],\n    subscriptions: new Map(),\n    subscribe: ref => {\n      const key = Symbol();\n      api.subscriptions.set(key, ref.current);\n      return () => void api.subscriptions.delete(key);\n    }\n  }));\n  let lastFactor = 0;\n  useFrame(() => {\n    const {\n      frames,\n      averages\n    } = api;\n\n    // If the fallback has been reached do not continue running samples\n    if (api.fallback) return;\n    if (averages.length < iterations) {\n      frames.push(performance.now());\n      const msPassed = frames[frames.length - 1] - frames[0];\n      if (msPassed >= ms) {\n        api.fps = Math.round(frames.length / msPassed * 1000 * decimalPlacesRatio) / decimalPlacesRatio;\n        api.refreshrate = Math.max(api.refreshrate, api.fps);\n        averages[api.index++ % iterations] = api.fps;\n        if (averages.length === iterations) {\n          const [lower, upper] = bounds(api.refreshrate);\n          const upperBounds = averages.filter(value => value >= upper);\n          const lowerBounds = averages.filter(value => value < lower);\n          // Trigger incline when more than -threshold- avgs exceed the upper bound\n          if (upperBounds.length > iterations * threshold) {\n            api.factor = Math.min(1, api.factor + step);\n            api.flipped++;\n            if (onIncline) onIncline(api);\n            api.subscriptions.forEach(value => value.onIncline && value.onIncline(api));\n          }\n          // Trigger decline when more than -threshold- avgs are below the lower bound\n          if (lowerBounds.length > iterations * threshold) {\n            api.factor = Math.max(0, api.factor - step);\n            api.flipped++;\n            if (onDecline) onDecline(api);\n            api.subscriptions.forEach(value => value.onDecline && value.onDecline(api));\n          }\n          if (lastFactor !== api.factor) {\n            lastFactor = api.factor;\n            if (onChange) onChange(api);\n            api.subscriptions.forEach(value => value.onChange && value.onChange(api));\n          }\n          if (api.flipped > flipflops && !api.fallback) {\n            api.fallback = true;\n            if (onFallback) onFallback(api);\n            api.subscriptions.forEach(value => value.onFallback && value.onFallback(api));\n          }\n          api.averages = [];\n\n          // Resetting the refreshrate creates more problems than it solves atm\n          // api.refreshrate = 0\n        }\n        api.frames = [];\n      }\n    }\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api\n  }, children);\n}\nfunction usePerformanceMonitor(_ref2) {\n  let {\n    onIncline,\n    onDecline,\n    onChange,\n    onFallback\n  } = _ref2;\n  const api = useContext(context);\n  const ref = useRef({\n    onIncline,\n    onDecline,\n    onChange,\n    onFallback\n  });\n  useLayoutEffect(() => {\n    ref.current.onIncline = onIncline;\n    ref.current.onDecline = onDecline;\n    ref.current.onChange = onChange;\n    ref.current.onFallback = onFallback;\n  }, [onIncline, onDecline, onChange, onFallback]);\n  useLayoutEffect(() => api.subscribe(ref), [api]);\n}\nexport { PerformanceMonitor, usePerformanceMonitor };","map":{"version":3,"names":["React","useState","useContext","useRef","useLayoutEffect","createContext","useFrame","context","PerformanceMonitor","_ref","iterations","ms","threshold","step","factor","_factor","flipflops","Infinity","bounds","refreshrate","onIncline","onDecline","onChange","onFallback","children","decimalPlacesRatio","Math","pow","api","_","fps","index","flipped","fallback","frames","averages","subscriptions","Map","subscribe","ref","key","Symbol","set","current","delete","lastFactor","length","push","performance","now","msPassed","round","max","lower","upper","upperBounds","filter","value","lowerBounds","min","forEach","createElement","Provider","usePerformanceMonitor","_ref2"],"sources":["D:/Repos/NIKE-DJANGO/Jord/l4fycy/node_modules/@react-three/drei/core/PerformanceMonitor.js"],"sourcesContent":["import * as React from 'react';\r\nimport { useState, useContext, useRef, useLayoutEffect, createContext } from 'react';\r\nimport { useFrame } from '@react-three/fiber';\r\n\r\nconst context = /* @__PURE__ */createContext(null);\r\nfunction PerformanceMonitor({\r\n  iterations = 10,\r\n  ms = 250,\r\n  threshold = 0.75,\r\n  step = 0.1,\r\n  factor: _factor = 0.5,\r\n  flipflops = Infinity,\r\n  bounds = refreshrate => refreshrate > 100 ? [60, 100] : [40, 60],\r\n  onIncline,\r\n  onDecline,\r\n  onChange,\r\n  onFallback,\r\n  children\r\n}) {\r\n  const decimalPlacesRatio = Math.pow(10, 0);\r\n  const [api, _] = useState(() => ({\r\n    fps: 0,\r\n    index: 0,\r\n    factor: _factor,\r\n    flipped: 0,\r\n    refreshrate: 0,\r\n    fallback: false,\r\n    frames: [],\r\n    averages: [],\r\n    subscriptions: new Map(),\r\n    subscribe: ref => {\r\n      const key = Symbol();\r\n      api.subscriptions.set(key, ref.current);\r\n      return () => void api.subscriptions.delete(key);\r\n    }\r\n  }));\r\n  let lastFactor = 0;\r\n  useFrame(() => {\r\n    const {\r\n      frames,\r\n      averages\r\n    } = api;\r\n\r\n    // If the fallback has been reached do not continue running samples\r\n    if (api.fallback) return;\r\n    if (averages.length < iterations) {\r\n      frames.push(performance.now());\r\n      const msPassed = frames[frames.length - 1] - frames[0];\r\n      if (msPassed >= ms) {\r\n        api.fps = Math.round(frames.length / msPassed * 1000 * decimalPlacesRatio) / decimalPlacesRatio;\r\n        api.refreshrate = Math.max(api.refreshrate, api.fps);\r\n        averages[api.index++ % iterations] = api.fps;\r\n        if (averages.length === iterations) {\r\n          const [lower, upper] = bounds(api.refreshrate);\r\n          const upperBounds = averages.filter(value => value >= upper);\r\n          const lowerBounds = averages.filter(value => value < lower);\r\n          // Trigger incline when more than -threshold- avgs exceed the upper bound\r\n          if (upperBounds.length > iterations * threshold) {\r\n            api.factor = Math.min(1, api.factor + step);\r\n            api.flipped++;\r\n            if (onIncline) onIncline(api);\r\n            api.subscriptions.forEach(value => value.onIncline && value.onIncline(api));\r\n          }\r\n          // Trigger decline when more than -threshold- avgs are below the lower bound\r\n          if (lowerBounds.length > iterations * threshold) {\r\n            api.factor = Math.max(0, api.factor - step);\r\n            api.flipped++;\r\n            if (onDecline) onDecline(api);\r\n            api.subscriptions.forEach(value => value.onDecline && value.onDecline(api));\r\n          }\r\n          if (lastFactor !== api.factor) {\r\n            lastFactor = api.factor;\r\n            if (onChange) onChange(api);\r\n            api.subscriptions.forEach(value => value.onChange && value.onChange(api));\r\n          }\r\n          if (api.flipped > flipflops && !api.fallback) {\r\n            api.fallback = true;\r\n            if (onFallback) onFallback(api);\r\n            api.subscriptions.forEach(value => value.onFallback && value.onFallback(api));\r\n          }\r\n          api.averages = [];\r\n\r\n          // Resetting the refreshrate creates more problems than it solves atm\r\n          // api.refreshrate = 0\r\n        }\r\n\r\n        api.frames = [];\r\n      }\r\n    }\r\n  });\r\n  return /*#__PURE__*/React.createElement(context.Provider, {\r\n    value: api\r\n  }, children);\r\n}\r\nfunction usePerformanceMonitor({\r\n  onIncline,\r\n  onDecline,\r\n  onChange,\r\n  onFallback\r\n}) {\r\n  const api = useContext(context);\r\n  const ref = useRef({\r\n    onIncline,\r\n    onDecline,\r\n    onChange,\r\n    onFallback\r\n  });\r\n  useLayoutEffect(() => {\r\n    ref.current.onIncline = onIncline;\r\n    ref.current.onDecline = onDecline;\r\n    ref.current.onChange = onChange;\r\n    ref.current.onFallback = onFallback;\r\n  }, [onIncline, onDecline, onChange, onFallback]);\r\n  useLayoutEffect(() => api.subscribe(ref), [api]);\r\n}\r\n\r\nexport { PerformanceMonitor, usePerformanceMonitor };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}