{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node from '../core/Node.js';\nimport LightNode from './LightNode.js';\n\nvar sortLights = function sortLights(lights) {\n  return lights.sort(function (a, b) {\n    return a.id - b.id;\n  });\n};\n\nvar LightsNode = /*#__PURE__*/function (_Node) {\n  _inherits(LightsNode, _Node);\n\n  var _super = _createSuper(LightsNode);\n\n  function LightsNode() {\n    var _this;\n\n    var lightNodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, LightsNode);\n\n    _this = _super.call(this, 'vec3');\n    _this.lightNodes = lightNodes;\n    _this._hash = null;\n    return _this;\n  }\n\n  _createClass(LightsNode, [{\n    key: \"hasLight\",\n    get: function get() {\n      return this.lightNodes.length > 0;\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var lightNodes = this.lightNodes;\n\n      var _iterator = _createForOfIteratorHelper(lightNodes),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var lightNode = _step.value;\n          lightNode.build(builder);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return 'vec3( 0.0 )';\n    }\n  }, {\n    key: \"getHash\",\n    value: function getHash() {\n      if (this._hash === null) {\n        var hash = '';\n        var lightNodes = this.lightNodes;\n\n        var _iterator2 = _createForOfIteratorHelper(lightNodes),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var lightNode = _step2.value;\n            hash += lightNode.light.uuid + ' ';\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        this._hash = hash;\n      }\n\n      return this._hash;\n    }\n  }, {\n    key: \"getLightNodeByHash\",\n    value: function getLightNodeByHash(hash) {\n      var lightNodes = this.lightNodes;\n\n      var _iterator3 = _createForOfIteratorHelper(lightNodes),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var lightNode = _step3.value;\n\n          if (lightNode.light.uuid === hash) {\n            return lightNode;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"fromLights\",\n    value: function fromLights(lights) {\n      var lightNodes = [];\n      lights = sortLights(lights);\n\n      var _iterator4 = _createForOfIteratorHelper(lights),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var light = _step4.value;\n          var lightNode = this.getLightNodeByHash(light.uuid);\n\n          if (lightNode === null) {\n            lightNode = new LightNode(light);\n          }\n\n          lightNodes.push(lightNode);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      this.lightNodes = lightNodes;\n      this._hash = null;\n      return this;\n    }\n  }]);\n\n  return LightsNode;\n}(Node);\n\nexport default LightsNode;","map":{"version":3,"names":["Node","LightNode","sortLights","lights","sort","a","b","id","LightsNode","lightNodes","_hash","length","builder","lightNode","build","hash","light","uuid","getLightNodeByHash","push"],"sources":["C:/Users/Arnav/Downloads/l4fycy/node_modules/three-stdlib/nodes/lights/LightsNode.js"],"sourcesContent":["import Node from '../core/Node.js';\nimport LightNode from './LightNode.js';\n\nconst sortLights = lights => {\n  return lights.sort((a, b) => a.id - b.id);\n};\n\nclass LightsNode extends Node {\n  constructor(lightNodes = []) {\n    super('vec3');\n    this.lightNodes = lightNodes;\n    this._hash = null;\n  }\n\n  get hasLight() {\n    return this.lightNodes.length > 0;\n  }\n\n  generate(builder) {\n    const lightNodes = this.lightNodes;\n\n    for (const lightNode of lightNodes) {\n      lightNode.build(builder);\n    }\n\n    return 'vec3( 0.0 )';\n  }\n\n  getHash() {\n    if (this._hash === null) {\n      let hash = '';\n      const lightNodes = this.lightNodes;\n\n      for (const lightNode of lightNodes) {\n        hash += lightNode.light.uuid + ' ';\n      }\n\n      this._hash = hash;\n    }\n\n    return this._hash;\n  }\n\n  getLightNodeByHash(hash) {\n    const lightNodes = this.lightNodes;\n\n    for (const lightNode of lightNodes) {\n      if (lightNode.light.uuid === hash) {\n        return lightNode;\n      }\n    }\n\n    return null;\n  }\n\n  fromLights(lights) {\n    const lightNodes = [];\n    lights = sortLights(lights);\n\n    for (const light of lights) {\n      let lightNode = this.getLightNodeByHash(light.uuid);\n\n      if (lightNode === null) {\n        lightNode = new LightNode(light);\n      }\n\n      lightNodes.push(lightNode);\n    }\n\n    this.lightNodes = lightNodes;\n    this._hash = null;\n    return this;\n  }\n\n}\n\nexport default LightsNode;\n"],"mappings":";;;;;AAAA,OAAOA,IAAP,MAAiB,iBAAjB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,MAAM,EAAI;EAC3B,OAAOA,MAAM,CAACC,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ;IAAA,OAAUD,CAAC,CAACE,EAAF,GAAOD,CAAC,CAACC,EAAnB;EAAA,CAAZ,CAAP;AACD,CAFD;;IAIMC,U;;;;;EACJ,sBAA6B;IAAA;;IAAA,IAAjBC,UAAiB,uEAAJ,EAAI;;IAAA;;IAC3B,0BAAM,MAAN;IACA,MAAKA,UAAL,GAAkBA,UAAlB;IACA,MAAKC,KAAL,GAAa,IAAb;IAH2B;EAI5B;;;;SAED,eAAe;MACb,OAAO,KAAKD,UAAL,CAAgBE,MAAhB,GAAyB,CAAhC;IACD;;;WAED,kBAASC,OAAT,EAAkB;MAChB,IAAMH,UAAU,GAAG,KAAKA,UAAxB;;MADgB,2CAGQA,UAHR;MAAA;;MAAA;QAGhB,oDAAoC;UAAA,IAAzBI,SAAyB;UAClCA,SAAS,CAACC,KAAV,CAAgBF,OAAhB;QACD;MALe;QAAA;MAAA;QAAA;MAAA;;MAOhB,OAAO,aAAP;IACD;;;WAED,mBAAU;MACR,IAAI,KAAKF,KAAL,KAAe,IAAnB,EAAyB;QACvB,IAAIK,IAAI,GAAG,EAAX;QACA,IAAMN,UAAU,GAAG,KAAKA,UAAxB;;QAFuB,4CAICA,UAJD;QAAA;;QAAA;UAIvB,uDAAoC;YAAA,IAAzBI,SAAyB;YAClCE,IAAI,IAAIF,SAAS,CAACG,KAAV,CAAgBC,IAAhB,GAAuB,GAA/B;UACD;QANsB;UAAA;QAAA;UAAA;QAAA;;QAQvB,KAAKP,KAAL,GAAaK,IAAb;MACD;;MAED,OAAO,KAAKL,KAAZ;IACD;;;WAED,4BAAmBK,IAAnB,EAAyB;MACvB,IAAMN,UAAU,GAAG,KAAKA,UAAxB;;MADuB,4CAGCA,UAHD;MAAA;;MAAA;QAGvB,uDAAoC;UAAA,IAAzBI,SAAyB;;UAClC,IAAIA,SAAS,CAACG,KAAV,CAAgBC,IAAhB,KAAyBF,IAA7B,EAAmC;YACjC,OAAOF,SAAP;UACD;QACF;MAPsB;QAAA;MAAA;QAAA;MAAA;;MASvB,OAAO,IAAP;IACD;;;WAED,oBAAWV,MAAX,EAAmB;MACjB,IAAMM,UAAU,GAAG,EAAnB;MACAN,MAAM,GAAGD,UAAU,CAACC,MAAD,CAAnB;;MAFiB,4CAIGA,MAJH;MAAA;;MAAA;QAIjB,uDAA4B;UAAA,IAAjBa,KAAiB;UAC1B,IAAIH,SAAS,GAAG,KAAKK,kBAAL,CAAwBF,KAAK,CAACC,IAA9B,CAAhB;;UAEA,IAAIJ,SAAS,KAAK,IAAlB,EAAwB;YACtBA,SAAS,GAAG,IAAIZ,SAAJ,CAAce,KAAd,CAAZ;UACD;;UAEDP,UAAU,CAACU,IAAX,CAAgBN,SAAhB;QACD;MAZgB;QAAA;MAAA;QAAA;MAAA;;MAcjB,KAAKJ,UAAL,GAAkBA,UAAlB;MACA,KAAKC,KAAL,GAAa,IAAb;MACA,OAAO,IAAP;IACD;;;;EAjEsBV,I;;AAqEzB,eAAeQ,UAAf"},"metadata":{},"sourceType":"module"}