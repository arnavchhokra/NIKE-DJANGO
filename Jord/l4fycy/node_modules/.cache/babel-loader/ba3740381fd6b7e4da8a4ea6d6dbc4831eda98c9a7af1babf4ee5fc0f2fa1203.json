{"ast":null,"code":"import * as React from 'react';\nimport create from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\n\n// These are removed in Zustand v4\n// unknown\n\n// Zustand v3 marked deprecations in 3.x, but there's no visible upgrade path\n\nconst context = /* @__PURE__ */React.createContext(null);\nfunction KeyboardControls(_ref) {\n  let {\n    map,\n    children,\n    onChange,\n    domElement\n  } = _ref;\n  const key = map.map(item => item.name + item.keys).join('-');\n  const useControls = React.useMemo(() => {\n    return create(subscribeWithSelector(() => map.reduce((prev, cur) => ({\n      ...prev,\n      [cur.name]: false\n    }), {})));\n  }, [key]);\n  const api = React.useMemo(() => [useControls.subscribe, useControls.getState, useControls], [key]);\n  const set = useControls.setState;\n  React.useEffect(() => {\n    const config = map.map(_ref2 => {\n      let {\n        name,\n        keys,\n        up\n      } = _ref2;\n      return {\n        keys,\n        up,\n        fn: value => {\n          // Set zustand state\n          set({\n            [name]: value\n          });\n          // Inform callback\n          if (onChange) onChange(name, value, api[1]());\n        }\n      };\n    });\n    const keyMap = config.reduce((out, _ref3) => {\n      let {\n        keys,\n        fn,\n        up = true\n      } = _ref3;\n      keys.forEach(key => out[key] = {\n        fn,\n        pressed: false,\n        up\n      });\n      return out;\n    }, {});\n    const downHandler = _ref4 => {\n      let {\n        key,\n        code\n      } = _ref4;\n      const obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      const {\n        fn,\n        pressed,\n        up\n      } = obj;\n      obj.pressed = true;\n      if (up || !pressed) fn(true);\n    };\n    const upHandler = _ref5 => {\n      let {\n        key,\n        code\n      } = _ref5;\n      const obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      const {\n        fn,\n        up\n      } = obj;\n      obj.pressed = false;\n      if (up) fn(false);\n    };\n    const source = domElement || window;\n    source.addEventListener('keydown', downHandler, {\n      passive: true\n    });\n    source.addEventListener('keyup', upHandler, {\n      passive: true\n    });\n    return () => {\n      source.removeEventListener('keydown', downHandler);\n      source.removeEventListener('keyup', upHandler);\n    };\n  }, [domElement, key]);\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api,\n    children: children\n  });\n}\nfunction useKeyboardControls(sel) {\n  const [sub, get, store] = React.useContext(context);\n  if (sel) return store(sel);else return [sub, get];\n}\nexport { KeyboardControls, useKeyboardControls };","map":{"version":3,"names":["React","create","subscribeWithSelector","context","createContext","KeyboardControls","_ref","map","children","onChange","domElement","key","item","name","keys","join","useControls","useMemo","reduce","prev","cur","api","subscribe","getState","set","setState","useEffect","config","_ref2","up","fn","value","keyMap","out","_ref3","forEach","pressed","downHandler","_ref4","code","obj","upHandler","_ref5","source","window","addEventListener","passive","removeEventListener","createElement","Provider","useKeyboardControls","sel","sub","get","store","useContext"],"sources":["D:/Repos/NIKE-DJANGO/Jord/l4fycy/node_modules/@react-three/drei/web/KeyboardControls.js"],"sourcesContent":["import * as React from 'react';\r\nimport create from 'zustand';\r\nimport { subscribeWithSelector } from 'zustand/middleware';\r\n\r\n// These are removed in Zustand v4\r\n// unknown\r\n\r\n// Zustand v3 marked deprecations in 3.x, but there's no visible upgrade path\r\n\r\nconst context = /* @__PURE__ */React.createContext(null);\r\nfunction KeyboardControls({\r\n  map,\r\n  children,\r\n  onChange,\r\n  domElement\r\n}) {\r\n  const key = map.map(item => item.name + item.keys).join('-');\r\n  const useControls = React.useMemo(() => {\r\n    return create(subscribeWithSelector(() => map.reduce((prev, cur) => ({\r\n      ...prev,\r\n      [cur.name]: false\r\n    }), {})));\r\n  }, [key]);\r\n  const api = React.useMemo(() => [useControls.subscribe, useControls.getState, useControls], [key]);\r\n  const set = useControls.setState;\r\n  React.useEffect(() => {\r\n    const config = map.map(({\r\n      name,\r\n      keys,\r\n      up\r\n    }) => ({\r\n      keys,\r\n      up,\r\n      fn: value => {\r\n        // Set zustand state\r\n        set({\r\n          [name]: value\r\n        });\r\n        // Inform callback\r\n        if (onChange) onChange(name, value, api[1]());\r\n      }\r\n    }));\r\n    const keyMap = config.reduce((out, {\r\n      keys,\r\n      fn,\r\n      up = true\r\n    }) => {\r\n      keys.forEach(key => out[key] = {\r\n        fn,\r\n        pressed: false,\r\n        up\r\n      });\r\n      return out;\r\n    }, {});\r\n    const downHandler = ({\r\n      key,\r\n      code\r\n    }) => {\r\n      const obj = keyMap[key] || keyMap[code];\r\n      if (!obj) return;\r\n      const {\r\n        fn,\r\n        pressed,\r\n        up\r\n      } = obj;\r\n      obj.pressed = true;\r\n      if (up || !pressed) fn(true);\r\n    };\r\n    const upHandler = ({\r\n      key,\r\n      code\r\n    }) => {\r\n      const obj = keyMap[key] || keyMap[code];\r\n      if (!obj) return;\r\n      const {\r\n        fn,\r\n        up\r\n      } = obj;\r\n      obj.pressed = false;\r\n      if (up) fn(false);\r\n    };\r\n    const source = domElement || window;\r\n    source.addEventListener('keydown', downHandler, {\r\n      passive: true\r\n    });\r\n    source.addEventListener('keyup', upHandler, {\r\n      passive: true\r\n    });\r\n    return () => {\r\n      source.removeEventListener('keydown', downHandler);\r\n      source.removeEventListener('keyup', upHandler);\r\n    };\r\n  }, [domElement, key]);\r\n  return /*#__PURE__*/React.createElement(context.Provider, {\r\n    value: api,\r\n    children: children\r\n  });\r\n}\r\nfunction useKeyboardControls(sel) {\r\n  const [sub, get, store] = React.useContext(context);\r\n  if (sel) return store(sel);else return [sub, get];\r\n}\r\n\r\nexport { KeyboardControls, useKeyboardControls };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}