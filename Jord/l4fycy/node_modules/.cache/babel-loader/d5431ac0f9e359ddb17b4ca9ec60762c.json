{"ast":null,"code":"import _toConsumableArray from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _assertThisInitialized from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty2 from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classCallCheck from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _createForOfIteratorHelper from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _slicedToArray from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { V, c as computeRubberband } from './maths-b2a210f4.esm.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\n\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\n\nvar actionsWithoutCaptureSupported = ['enter', 'leave'];\n\nfunction hasCapture() {\n  var capture = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  var actionKey = arguments.length > 1 ? arguments[1] : undefined;\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\n}\n\nfunction toHandlerProp(device) {\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var capture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var deviceProps = EVENT_TYPE_MAP[device];\n  var actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\n}\n\nvar pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\n\nfunction parseProp(prop) {\n  var eventKey = prop.substring(2).toLowerCase();\n  var passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  var captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  var capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture: capture,\n    passive: passive\n  };\n}\n\nfunction toDomEventType(device) {\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var deviceProps = EVENT_TYPE_MAP[device];\n  var actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\n\nfunction isTouch(event) {\n  return 'touches' in event;\n}\n\nfunction getPointerType(event) {\n  if (isTouch(event)) return 'touch';\n  if ('pointerType' in event) return event.pointerType;\n  return 'mouse';\n}\n\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(function (e) {\n    var _event$currentTarget, _event$currentTarget$;\n\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\n\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\n\nfunction distanceAngle(P1, P2) {\n  var dx = P2.clientX - P1.clientX;\n  var dy = P2.clientY - P1.clientY;\n  var cx = (P2.clientX + P1.clientX) / 2;\n  var cy = (P2.clientY + P1.clientY) / 2;\n  var distance = Math.hypot(dx, dy);\n  var angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  var origin = [cx, cy];\n  return {\n    angle: angle,\n    distance: distance,\n    origin: origin\n  };\n}\n\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(function (touch) {\n    return touch.identifier;\n  });\n}\n\nfunction touchDistanceAngle(event, ids) {\n  var _Array$from$filter = Array.from(event.touches).filter(function (touch) {\n    return ids.includes(touch.identifier);\n  }),\n      _Array$from$filter2 = _slicedToArray(_Array$from$filter, 2),\n      P1 = _Array$from$filter2[0],\n      P2 = _Array$from$filter2[1];\n\n  return distanceAngle(P1, P2);\n}\n\nfunction pointerId(event) {\n  var valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\n\nfunction pointerValues(event) {\n  var valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\n\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n\nfunction wheelValues(event) {\n  var deltaX = event.deltaX,\n      deltaY = event.deltaY,\n      deltaMode = event.deltaMode;\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return [deltaX, deltaY];\n}\n\nfunction scrollValues(event) {\n  var _ref, _ref2;\n\n  var _event$currentTarget2 = event.currentTarget,\n      scrollX = _event$currentTarget2.scrollX,\n      scrollY = _event$currentTarget2.scrollY,\n      scrollLeft = _event$currentTarget2.scrollLeft,\n      scrollTop = _event$currentTarget2.scrollTop;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\n\nfunction getEventDetails(event) {\n  var payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n\n  if ('shiftKey' in event) {\n    var shiftKey = event.shiftKey,\n        altKey = event.altKey,\n        metaKey = event.metaKey,\n        ctrlKey = event.ctrlKey;\n    Object.assign(payload, {\n      shiftKey: shiftKey,\n      altKey: altKey,\n      metaKey: metaKey,\n      ctrlKey: ctrlKey\n    });\n  }\n\n  return payload;\n}\n\nfunction call(v) {\n  if (typeof v === 'function') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return v.apply(void 0, args);\n  } else {\n    return v;\n  }\n}\n\nfunction noop() {}\n\nfunction chain() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    var result;\n\n    var _iterator = _createForOfIteratorHelper(fns),\n        _step2;\n\n    try {\n      for (_iterator.s(); !(_step2 = _iterator.n()).done;) {\n        var fn = _step2.value;\n        result = fn.apply(this, arguments) || result;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return result;\n  };\n}\n\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nvar BEFORE_LAST_KINEMATICS_DELAY = 32;\n\nvar Engine = /*#__PURE__*/function () {\n  function Engine(ctrl, args, key) {\n    _classCallCheck(this, Engine);\n\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n\n  _createClass(Engine, [{\n    key: \"state\",\n    get: function get() {\n      return this.ctrl.state[this.key];\n    },\n    set: function set(state) {\n      this.ctrl.state[this.key] = state;\n    }\n  }, {\n    key: \"shared\",\n    get: function get() {\n      return this.ctrl.state.shared;\n    }\n  }, {\n    key: \"eventStore\",\n    get: function get() {\n      return this.ctrl.gestureEventStores[this.key];\n    }\n  }, {\n    key: \"timeoutStore\",\n    get: function get() {\n      return this.ctrl.gestureTimeoutStores[this.key];\n    }\n  }, {\n    key: \"config\",\n    get: function get() {\n      return this.ctrl.config[this.key];\n    }\n  }, {\n    key: \"sharedConfig\",\n    get: function get() {\n      return this.ctrl.config.shared;\n    }\n  }, {\n    key: \"handler\",\n    get: function get() {\n      return this.ctrl.handlers[this.key];\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      var state = this.state,\n          shared = this.shared,\n          ingKey = this.ingKey,\n          args = this.args;\n      shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n      state._step = [false, false];\n      state.intentional = false;\n      state._movement = [0, 0];\n      state._distance = [0, 0];\n      state._direction = [0, 0];\n      state._delta = [0, 0];\n      state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n      state.args = args;\n      state.axis = undefined;\n      state.memo = undefined;\n      state.elapsedTime = 0;\n      state.direction = [0, 0];\n      state.distance = [0, 0];\n      state.overflow = [0, 0];\n      state._movementBound = [false, false];\n      state.velocity = [0, 0];\n      state.movement = [0, 0];\n      state.delta = [0, 0];\n      state.timeStamp = 0;\n    }\n  }, {\n    key: \"start\",\n    value: function start(event) {\n      var state = this.state;\n      var config = this.config;\n\n      if (!state._active) {\n        this.reset();\n        this.computeInitial();\n        state._active = true;\n        state.target = event.target;\n        state.currentTarget = event.currentTarget;\n        state.lastOffset = config.from ? call(config.from, state) : state.offset;\n        state.offset = state.lastOffset;\n      }\n\n      state.startTime = state.timeStamp = event.timeStamp;\n    }\n  }, {\n    key: \"computeValues\",\n    value: function computeValues(values) {\n      var state = this.state;\n      state._values = values;\n      state.values = this.config.transform(values);\n    }\n  }, {\n    key: \"computeInitial\",\n    value: function computeInitial() {\n      var state = this.state;\n      state._initial = state._values;\n      state.initial = state.values;\n    }\n  }, {\n    key: \"compute\",\n    value: function compute(event) {\n      var state = this.state,\n          config = this.config,\n          shared = this.shared;\n      state.args = this.args;\n      var dt = 0;\n\n      if (event) {\n        state.event = event;\n        if (config.preventDefault && event.cancelable) state.event.preventDefault();\n        state.type = event.type;\n        shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n        shared.locked = !!document.pointerLockElement;\n        Object.assign(shared, getEventDetails(event));\n        shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n        dt = event.timeStamp - state.timeStamp;\n        state.timeStamp = event.timeStamp;\n        state.elapsedTime = state.timeStamp - state.startTime;\n      }\n\n      if (state._active) {\n        var _absoluteDelta = state._delta.map(Math.abs);\n\n        V.addTo(state._distance, _absoluteDelta);\n      }\n\n      if (this.axisIntent) this.axisIntent(event);\n\n      var _state$_movement = _slicedToArray(state._movement, 2),\n          _m0 = _state$_movement[0],\n          _m1 = _state$_movement[1];\n\n      var _config$threshold = _slicedToArray(config.threshold, 2),\n          t0 = _config$threshold[0],\n          t1 = _config$threshold[1];\n\n      var _step = state._step,\n          values = state.values;\n\n      if (config.hasCustomTransform) {\n        if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n        if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n      } else {\n        if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n        if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n      }\n\n      state.intentional = _step[0] !== false || _step[1] !== false;\n      if (!state.intentional) return;\n      var movement = [0, 0];\n\n      if (config.hasCustomTransform) {\n        var _values2 = _slicedToArray(values, 2),\n            v0 = _values2[0],\n            v1 = _values2[1];\n\n        movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n        movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n      } else {\n        movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n        movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n      }\n\n      if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\n      var previousOffset = state.offset;\n      var gestureIsActive = state._active && !state._blocked || state.active;\n\n      if (gestureIsActive) {\n        state.first = state._active && !state.active;\n        state.last = !state._active && state.active;\n        state.active = shared[this.ingKey] = state._active;\n\n        if (event) {\n          if (state.first) {\n            if ('bounds' in config) state._bounds = call(config.bounds, state);\n            if (this.setup) this.setup();\n          }\n\n          state.movement = movement;\n          this.computeOffset();\n        }\n      }\n\n      var _state$offset = _slicedToArray(state.offset, 2),\n          ox = _state$offset[0],\n          oy = _state$offset[1];\n\n      var _state$_bounds = _slicedToArray(state._bounds, 2),\n          _state$_bounds$ = _slicedToArray(_state$_bounds[0], 2),\n          x0 = _state$_bounds$[0],\n          x1 = _state$_bounds$[1],\n          _state$_bounds$2 = _slicedToArray(_state$_bounds[1], 2),\n          y0 = _state$_bounds$2[0],\n          y1 = _state$_bounds$2[1];\n\n      state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n      state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n      state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n      var rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n      state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n      state.delta = V.sub(state.offset, previousOffset);\n      this.computeMovement();\n\n      if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n        state.delta = V.sub(state.offset, previousOffset);\n        var absoluteDelta = state.delta.map(Math.abs);\n        V.addTo(state.distance, absoluteDelta);\n        state.direction = state.delta.map(Math.sign);\n        state._direction = state._delta.map(Math.sign);\n\n        if (!state.first && dt > 0) {\n          state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n        }\n      }\n    }\n  }, {\n    key: \"emit\",\n    value: function emit() {\n      var state = this.state;\n      var shared = this.shared;\n      var config = this.config;\n      if (!state._active) this.clean();\n      if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n      var memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, _defineProperty2({}, this.aliasKey, state.values)));\n      if (memo !== undefined) state.memo = memo;\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      this.eventStore.clean();\n      this.timeoutStore.clean();\n    }\n  }]);\n\n  return Engine;\n}();\n\nfunction selectAxis(_ref3, threshold) {\n  var _ref4 = _slicedToArray(_ref3, 2),\n      dx = _ref4[0],\n      dy = _ref4[1];\n\n  var absDx = Math.abs(dx);\n  var absDy = Math.abs(dy);\n\n  if (absDx > absDy && absDx > threshold) {\n    return 'x';\n  }\n\n  if (absDy > absDx && absDy > threshold) {\n    return 'y';\n  }\n\n  return undefined;\n}\n\nvar CoordinatesEngine = /*#__PURE__*/function (_Engine) {\n  _inherits(CoordinatesEngine, _Engine);\n\n  var _super = _createSuper(CoordinatesEngine);\n\n  function CoordinatesEngine() {\n    var _this;\n\n    _classCallCheck(this, CoordinatesEngine);\n\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"aliasKey\", 'xy');\n\n    return _this;\n  }\n\n  _createClass(CoordinatesEngine, [{\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(CoordinatesEngine.prototype), \"reset\", this).call(this);\n\n      this.state.axis = undefined;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.state.offset = [0, 0];\n      this.state.lastOffset = [0, 0];\n    }\n  }, {\n    key: \"computeOffset\",\n    value: function computeOffset() {\n      this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n    }\n  }, {\n    key: \"computeMovement\",\n    value: function computeMovement() {\n      this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n    }\n  }, {\n    key: \"axisIntent\",\n    value: function axisIntent(event) {\n      var state = this.state;\n      var config = this.config;\n\n      if (!state.axis && event) {\n        var threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\n        state.axis = selectAxis(state._movement, threshold);\n      }\n\n      state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\n    }\n  }, {\n    key: \"restrictToAxis\",\n    value: function restrictToAxis(v) {\n      if (this.config.axis || this.config.lockDirection) {\n        switch (this.state.axis) {\n          case 'x':\n            v[1] = 0;\n            break;\n\n          case 'y':\n            v[0] = 0;\n            break;\n        }\n      }\n    }\n  }]);\n\n  return CoordinatesEngine;\n}(Engine);\n\nvar identity = function identity(v) {\n  return v;\n};\n\nvar DEFAULT_RUBBERBAND = 0.15;\nvar commonConfigResolver = {\n  enabled: function enabled() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  },\n  eventOptions: function eventOptions(value, _k, config) {\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\n  },\n  preventDefault: function preventDefault() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return value;\n  },\n  triggerAllEvents: function triggerAllEvents() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return value;\n  },\n  rubberband: function rubberband() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n\n      case false:\n        return [0, 0];\n\n      default:\n        return V.toVector(value);\n    }\n  },\n  from: function from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n  transform: function transform(value, _k, config) {\n    var transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n\n    if (process.env.NODE_ENV === 'development') {\n      var originalTransform = transform || identity;\n      return function (v) {\n        var r = originalTransform(v);\n\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(\"[@use-gesture]: config.transform() must produce a valid result, but it was: [\".concat(r[0], \",\").concat([1], \"]\"));\n        }\n\n        return r;\n      };\n    }\n\n    return transform || identity;\n  },\n  threshold: function threshold(value) {\n    return V.toVector(value, 0);\n  }\n};\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget: function domTarget(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `domTarget` option has been renamed to `target`.\");\n      }\n\n      return NaN;\n    },\n    lockDirection: function lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `lockDirection` option has been merged with `axis`. Use it as in `{ axis: 'lock' }`\");\n      }\n\n      return NaN;\n    },\n    initial: function initial(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `initial` option has been renamed to `from`.\");\n      }\n\n      return NaN;\n    }\n  });\n}\n\nvar DEFAULT_AXIS_THRESHOLD = 0;\n\nvar coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis: function axis(_v, _k, _ref5) {\n    var axis = _ref5.axis;\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n  axisThreshold: function axisThreshold() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_AXIS_THRESHOLD;\n    return value;\n  },\n  bounds: function bounds() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (typeof value === 'function') {\n      return function (state) {\n        return coordinatesConfigResolver.bounds(value(state));\n      };\n    }\n\n    if ('current' in value) {\n      return function () {\n        return value.current;\n      };\n    }\n\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n\n    var _value$left = value.left,\n        left = _value$left === void 0 ? -Infinity : _value$left,\n        _value$right = value.right,\n        right = _value$right === void 0 ? Infinity : _value$right,\n        _value$top = value.top,\n        top = _value$top === void 0 ? -Infinity : _value$top,\n        _value$bottom = value.bottom,\n        bottom = _value$bottom === void 0 ? Infinity : _value$bottom;\n    return [[left, right], [top, bottom]];\n  }\n});\n\nvar DISPLACEMENT = 10;\nvar KEYS_DELTA_MAP = {\n  ArrowRight: function ArrowRight() {\n    var factor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return [DISPLACEMENT * factor, 0];\n  },\n  ArrowLeft: function ArrowLeft() {\n    var factor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return [-DISPLACEMENT * factor, 0];\n  },\n  ArrowUp: function ArrowUp() {\n    var factor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return [0, -DISPLACEMENT * factor];\n  },\n  ArrowDown: function ArrowDown() {\n    var factor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return [0, DISPLACEMENT * factor];\n  }\n};\n\nvar DragEngine = /*#__PURE__*/function (_CoordinatesEngine) {\n  _inherits(DragEngine, _CoordinatesEngine);\n\n  var _super2 = _createSuper(DragEngine);\n\n  function DragEngine() {\n    var _this2;\n\n    _classCallCheck(this, DragEngine);\n\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    _this2 = _super2.call.apply(_super2, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this2), \"ingKey\", 'dragging');\n\n    return _this2;\n  }\n\n  _createClass(DragEngine, [{\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(DragEngine.prototype), \"reset\", this).call(this);\n\n      var state = this.state;\n      state._pointerId = undefined;\n      state._pointerActive = false;\n      state._keyboardActive = false;\n      state._preventScroll = false;\n      state._delayed = false;\n      state.swipe = [0, 0];\n      state.tap = false;\n      state.canceled = false;\n      state.cancel = this.cancel.bind(this);\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var state = this.state;\n\n      if (state._bounds instanceof HTMLElement) {\n        var boundRect = state._bounds.getBoundingClientRect();\n\n        var targetRect = state.currentTarget.getBoundingClientRect();\n        var _bounds = {\n          left: boundRect.left - targetRect.left + state.offset[0],\n          right: boundRect.right - targetRect.right + state.offset[0],\n          top: boundRect.top - targetRect.top + state.offset[1],\n          bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n        };\n        state._bounds = coordinatesConfigResolver.bounds(_bounds);\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _this3 = this;\n\n      var state = this.state;\n      if (state.canceled) return;\n      state.canceled = true;\n      state._active = false;\n      setTimeout(function () {\n        _this3.compute();\n\n        _this3.emit();\n      }, 0);\n    }\n  }, {\n    key: \"setActive\",\n    value: function setActive() {\n      this.state._active = this.state._pointerActive || this.state._keyboardActive;\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      this.pointerClean();\n      this.state._pointerActive = false;\n      this.state._keyboardActive = false;\n\n      _get(_getPrototypeOf(DragEngine.prototype), \"clean\", this).call(this);\n    }\n  }, {\n    key: \"pointerDown\",\n    value: function pointerDown(event) {\n      var config = this.config;\n      var state = this.state;\n      if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n      var ctrlIds = this.ctrl.setEventIds(event);\n\n      if (config.pointerCapture) {\n        event.target.setPointerCapture(event.pointerId);\n      }\n\n      if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\n      this.start(event);\n      this.setupPointer(event);\n      state._pointerId = pointerId(event);\n      state._pointerActive = true;\n      this.computeValues(pointerValues(event));\n      this.computeInitial();\n\n      if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\n        state._active = false;\n        this.setupScrollPrevention(event);\n      } else if (config.delay > 0) {\n        this.setupDelayTrigger(event);\n\n        if (config.triggerAllEvents) {\n          this.compute(event);\n          this.emit();\n        }\n      } else {\n        this.startPointerDrag(event);\n      }\n    }\n  }, {\n    key: \"startPointerDrag\",\n    value: function startPointerDrag(event) {\n      var state = this.state;\n      state._active = true;\n      state._preventScroll = true;\n      state._delayed = false;\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"pointerMove\",\n    value: function pointerMove(event) {\n      var state = this.state;\n      var config = this.config;\n      if (!state._pointerActive) return;\n      if (state.type === event.type && event.timeStamp === state.timeStamp) return;\n      var id = pointerId(event);\n      if (state._pointerId !== undefined && id !== state._pointerId) return;\n\n      var _values = pointerValues(event);\n\n      if (document.pointerLockElement === event.target) {\n        state._delta = [event.movementX, event.movementY];\n      } else {\n        state._delta = V.sub(_values, state._values);\n        this.computeValues(_values);\n      }\n\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n\n      if (state._delayed && state.intentional) {\n        this.timeoutStore.remove('dragDelay');\n        state.active = false;\n        this.startPointerDrag(event);\n        return;\n      }\n\n      if (config.preventScrollAxis && !state._preventScroll) {\n        if (state.axis) {\n          if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n            state._active = false;\n            this.clean();\n            return;\n          } else {\n            this.timeoutStore.remove('startPointerDrag');\n            this.startPointerDrag(event);\n            return;\n          }\n        } else {\n          return;\n        }\n      }\n\n      this.emit();\n    }\n  }, {\n    key: \"pointerUp\",\n    value: function pointerUp(event) {\n      this.ctrl.setEventIds(event);\n\n      try {\n        if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n          ;\n          event.target.releasePointerCapture(event.pointerId);\n        }\n      } catch (_unused) {\n        if (process.env.NODE_ENV === 'development') {\n          console.warn(\"[@use-gesture]: If you see this message, it's likely that you're using an outdated version of `@react-three/fiber`. \\n\\nPlease upgrade to the latest version.\");\n        }\n      }\n\n      var state = this.state;\n      var config = this.config;\n      if (!state._active || !state._pointerActive) return;\n      var id = pointerId(event);\n      if (state._pointerId !== undefined && id !== state._pointerId) return;\n      this.state._pointerActive = false;\n      this.setActive();\n      this.compute(event);\n\n      var _state$_distance = _slicedToArray(state._distance, 2),\n          dx = _state$_distance[0],\n          dy = _state$_distance[1];\n\n      state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n\n      if (state.tap && config.filterTaps) {\n        state._force = true;\n      } else {\n        var _state$direction = _slicedToArray(state.direction, 2),\n            dirx = _state$direction[0],\n            diry = _state$direction[1];\n\n        var _state$velocity = _slicedToArray(state.velocity, 2),\n            vx = _state$velocity[0],\n            vy = _state$velocity[1];\n\n        var _state$movement = _slicedToArray(state.movement, 2),\n            mx = _state$movement[0],\n            my = _state$movement[1];\n\n        var _config$swipe$velocit = _slicedToArray(config.swipe.velocity, 2),\n            svx = _config$swipe$velocit[0],\n            svy = _config$swipe$velocit[1];\n\n        var _config$swipe$distanc = _slicedToArray(config.swipe.distance, 2),\n            sx = _config$swipe$distanc[0],\n            sy = _config$swipe$distanc[1];\n\n        var sdt = config.swipe.duration;\n\n        if (state.elapsedTime < sdt) {\n          if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\n          if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\n        }\n      }\n\n      this.emit();\n    }\n  }, {\n    key: \"pointerClick\",\n    value: function pointerClick(event) {\n      if (!this.state.tap) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  }, {\n    key: \"setupPointer\",\n    value: function setupPointer(event) {\n      var config = this.config;\n      var device = config.device;\n\n      if (process.env.NODE_ENV === 'development') {\n        try {\n          if (device === 'pointer' && config.preventScrollDelay === undefined) {\n            var currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n            var style = window.getComputedStyle(currentTarget);\n\n            if (style.touchAction === 'auto') {\n              console.warn(\"[@use-gesture]: The drag target has its `touch-action` style property set to `auto`. It is recommended to add `touch-action: 'none'` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.\", currentTarget);\n            }\n          }\n        } catch (_unused2) {}\n      }\n\n      if (config.pointerLock) {\n        event.currentTarget.requestPointerLock();\n      }\n\n      if (!config.pointerCapture) {\n        this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n        this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n        this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n      }\n    }\n  }, {\n    key: \"pointerClean\",\n    value: function pointerClean() {\n      if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n        document.exitPointerLock();\n      }\n    }\n  }, {\n    key: \"preventScroll\",\n    value: function preventScroll(event) {\n      if (this.state._preventScroll && event.cancelable) {\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"setupScrollPrevention\",\n    value: function setupScrollPrevention(event) {\n      this.state._preventScroll = false;\n      persistEvent(event);\n      var remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n        passive: false\n      });\n      this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\n      this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\n      this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n    }\n  }, {\n    key: \"setupDelayTrigger\",\n    value: function setupDelayTrigger(event) {\n      var _this4 = this;\n\n      this.state._delayed = true;\n      this.timeoutStore.add('dragDelay', function () {\n        _this4.state._step = [0, 0];\n\n        _this4.startPointerDrag(event);\n      }, this.config.delay);\n    }\n  }, {\n    key: \"keyDown\",\n    value: function keyDown(event) {\n      var deltaFn = KEYS_DELTA_MAP[event.key];\n\n      if (deltaFn) {\n        var state = this.state;\n        var factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n        this.start(event);\n        state._delta = deltaFn(factor);\n        state._keyboardActive = true;\n        V.addTo(state._movement, state._delta);\n        this.compute(event);\n        this.emit();\n      }\n    }\n  }, {\n    key: \"keyUp\",\n    value: function keyUp(event) {\n      if (!(event.key in KEYS_DELTA_MAP)) return;\n      this.state._keyboardActive = false;\n      this.setActive();\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      var device = this.config.device;\n      bindFunction(device, 'start', this.pointerDown.bind(this));\n\n      if (this.config.pointerCapture) {\n        bindFunction(device, 'change', this.pointerMove.bind(this));\n        bindFunction(device, 'end', this.pointerUp.bind(this));\n        bindFunction(device, 'cancel', this.pointerUp.bind(this));\n        bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n      }\n\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n\n      if (this.config.filterTaps) {\n        bindFunction('click', '', this.pointerClick.bind(this), {\n          capture: true,\n          passive: false\n        });\n      }\n    }\n  }]);\n\n  return DragEngine;\n}(CoordinatesEngine);\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nvar isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\n\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\n\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\n\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\n\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\n\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar SUPPORT = {\n  isBrowser: isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: isTouchScreen(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\nvar DEFAULT_PREVENT_SCROLL_DELAY = 250;\nvar DEFAULT_DRAG_DELAY = 180;\nvar DEFAULT_SWIPE_VELOCITY = 0.5;\nvar DEFAULT_SWIPE_DISTANCE = 50;\nvar DEFAULT_SWIPE_DURATION = 250;\nvar DEFAULT_DRAG_AXIS_THRESHOLD = {\n  mouse: 0,\n  touch: 0,\n  pen: 8\n};\n\nvar dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device: function device(_v, _k, _ref6) {\n    var _ref6$pointer = _ref6.pointer;\n    _ref6$pointer = _ref6$pointer === void 0 ? {} : _ref6$pointer;\n    var _ref6$pointer$touch = _ref6$pointer.touch,\n        touch = _ref6$pointer$touch === void 0 ? false : _ref6$pointer$touch,\n        _ref6$pointer$lock = _ref6$pointer.lock,\n        lock = _ref6$pointer$lock === void 0 ? false : _ref6$pointer$lock,\n        _ref6$pointer$mouse = _ref6$pointer.mouse,\n        mouse = _ref6$pointer$mouse === void 0 ? false : _ref6$pointer$mouse;\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n  preventScrollAxis: function preventScrollAxis(value, _k, _ref7) {\n    var preventScroll = _ref7.preventScroll;\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n  pointerCapture: function pointerCapture(_v, _k, _ref8) {\n    var _ref8$pointer = _ref8.pointer;\n    _ref8$pointer = _ref8$pointer === void 0 ? {} : _ref8$pointer;\n    var _ref8$pointer$capture = _ref8$pointer.capture,\n        capture = _ref8$pointer$capture === void 0 ? true : _ref8$pointer$capture,\n        _ref8$pointer$buttons = _ref8$pointer.buttons,\n        buttons = _ref8$pointer$buttons === void 0 ? 1 : _ref8$pointer$buttons;\n    this.pointerButtons = buttons;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n  threshold: function threshold(value, _k, _ref9) {\n    var _ref9$filterTaps = _ref9.filterTaps,\n        filterTaps = _ref9$filterTaps === void 0 ? false : _ref9$filterTaps,\n        _ref9$tapsThreshold = _ref9.tapsThreshold,\n        tapsThreshold = _ref9$tapsThreshold === void 0 ? 3 : _ref9$tapsThreshold,\n        _ref9$axis = _ref9.axis,\n        axis = _ref9$axis === void 0 ? undefined : _ref9$axis;\n    var threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n  swipe: function swipe() {\n    var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref10$velocity = _ref10.velocity,\n        velocity = _ref10$velocity === void 0 ? DEFAULT_SWIPE_VELOCITY : _ref10$velocity,\n        _ref10$distance = _ref10.distance,\n        distance = _ref10$distance === void 0 ? DEFAULT_SWIPE_DISTANCE : _ref10$distance,\n        _ref10$duration = _ref10.duration,\n        duration = _ref10$duration === void 0 ? DEFAULT_SWIPE_DURATION : _ref10$duration;\n\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration: duration\n    };\n  },\n  delay: function delay() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  },\n  axisThreshold: function axisThreshold(value) {\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\n  }\n});\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch: function useTouch(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `useTouch` option has been renamed to `pointer.touch`. Use it as in `{ pointer: { touch: true } }`.\");\n      }\n\n      return NaN;\n    },\n    experimental_preventWindowScrollY: function experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `experimental_preventWindowScrollY` option has been renamed to `preventScroll`.\");\n      }\n\n      return NaN;\n    },\n    swipeVelocity: function swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `swipeVelocity` option has been renamed to `swipe.velocity`. Use it as in `{ swipe: { velocity: 0.5 } }`.\");\n      }\n\n      return NaN;\n    },\n    swipeDistance: function swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `swipeDistance` option has been renamed to `swipe.distance`. Use it as in `{ swipe: { distance: 50 } }`.\");\n      }\n\n      return NaN;\n    },\n    swipeDuration: function swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `swipeDuration` option has been renamed to `swipe.duration`. Use it as in `{ swipe: { duration: 250 } }`.\");\n      }\n\n      return NaN;\n    }\n  });\n}\n\nvar SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nvar PINCH_WHEEL_RATIO = 100;\n\nvar PinchEngine = /*#__PURE__*/function (_Engine2) {\n  _inherits(PinchEngine, _Engine2);\n\n  var _super3 = _createSuper(PinchEngine);\n\n  function PinchEngine() {\n    var _this5;\n\n    _classCallCheck(this, PinchEngine);\n\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    _this5 = _super3.call.apply(_super3, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this5), \"ingKey\", 'pinching');\n\n    _defineProperty(_assertThisInitialized(_this5), \"aliasKey\", 'da');\n\n    return _this5;\n  }\n\n  _createClass(PinchEngine, [{\n    key: \"init\",\n    value: function init() {\n      this.state.offset = [1, 0];\n      this.state.lastOffset = [1, 0];\n      this.state._pointerEvents = new Map();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(PinchEngine.prototype), \"reset\", this).call(this);\n\n      var state = this.state;\n      state._touchIds = [];\n      state.canceled = false;\n      state.cancel = this.cancel.bind(this);\n      state.turns = 0;\n    }\n  }, {\n    key: \"computeOffset\",\n    value: function computeOffset() {\n      var _this$state = this.state,\n          type = _this$state.type,\n          movement = _this$state.movement,\n          lastOffset = _this$state.lastOffset;\n\n      if (type === 'wheel') {\n        this.state.offset = V.add(movement, lastOffset);\n      } else {\n        this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n      }\n    }\n  }, {\n    key: \"computeMovement\",\n    value: function computeMovement() {\n      var _this$state2 = this.state,\n          offset = _this$state2.offset,\n          lastOffset = _this$state2.lastOffset;\n      this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n    }\n  }, {\n    key: \"axisIntent\",\n    value: function axisIntent() {\n      var state = this.state;\n\n      var _state$_movement2 = _slicedToArray(state._movement, 2),\n          _m0 = _state$_movement2[0],\n          _m1 = _state$_movement2[1];\n\n      if (!state.axis) {\n        var axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\n        if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n      }\n    }\n  }, {\n    key: \"restrictToAxis\",\n    value: function restrictToAxis(v) {\n      if (this.config.lockDirection) {\n        if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _this6 = this;\n\n      var state = this.state;\n      if (state.canceled) return;\n      setTimeout(function () {\n        state.canceled = true;\n        state._active = false;\n\n        _this6.compute();\n\n        _this6.emit();\n      }, 0);\n    }\n  }, {\n    key: \"touchStart\",\n    value: function touchStart(event) {\n      this.ctrl.setEventIds(event);\n      var state = this.state;\n      var ctrlTouchIds = this.ctrl.touchIds;\n\n      if (state._active) {\n        if (state._touchIds.every(function (id) {\n          return ctrlTouchIds.has(id);\n        })) return;\n      }\n\n      if (ctrlTouchIds.size < 2) return;\n      this.start(event);\n      state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n      var payload = touchDistanceAngle(event, state._touchIds);\n      this.pinchStart(event, payload);\n    }\n  }, {\n    key: \"pointerStart\",\n    value: function pointerStart(event) {\n      if (event.buttons != null && event.buttons % 2 !== 1) return;\n      this.ctrl.setEventIds(event);\n      event.target.setPointerCapture(event.pointerId);\n      var state = this.state;\n      var _pointerEvents = state._pointerEvents;\n      var ctrlPointerIds = this.ctrl.pointerIds;\n\n      if (state._active) {\n        if (Array.from(_pointerEvents.keys()).every(function (id) {\n          return ctrlPointerIds.has(id);\n        })) return;\n      }\n\n      if (_pointerEvents.size < 2) {\n        _pointerEvents.set(event.pointerId, event);\n      }\n\n      if (state._pointerEvents.size < 2) return;\n      this.start(event);\n      var payload = distanceAngle.apply(void 0, _toConsumableArray(Array.from(_pointerEvents.values())));\n      this.pinchStart(event, payload);\n    }\n  }, {\n    key: \"pinchStart\",\n    value: function pinchStart(event, payload) {\n      var state = this.state;\n      state.origin = payload.origin;\n      this.computeValues([payload.distance, payload.angle]);\n      this.computeInitial();\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"touchMove\",\n    value: function touchMove(event) {\n      if (!this.state._active) return;\n      var payload = touchDistanceAngle(event, this.state._touchIds);\n      this.pinchMove(event, payload);\n    }\n  }, {\n    key: \"pointerMove\",\n    value: function pointerMove(event) {\n      var _pointerEvents = this.state._pointerEvents;\n\n      if (_pointerEvents.has(event.pointerId)) {\n        _pointerEvents.set(event.pointerId, event);\n      }\n\n      if (!this.state._active) return;\n      var payload = distanceAngle.apply(void 0, _toConsumableArray(Array.from(_pointerEvents.values())));\n      this.pinchMove(event, payload);\n    }\n  }, {\n    key: \"pinchMove\",\n    value: function pinchMove(event, payload) {\n      var state = this.state;\n      var prev_a = state._values[1];\n      var delta_a = payload.angle - prev_a;\n      var delta_turns = 0;\n      if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n      this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n      state.origin = payload.origin;\n      state.turns = delta_turns;\n      state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"touchEnd\",\n    value: function touchEnd(event) {\n      var _this7 = this;\n\n      this.ctrl.setEventIds(event);\n      if (!this.state._active) return;\n\n      if (this.state._touchIds.some(function (id) {\n        return !_this7.ctrl.touchIds.has(id);\n      })) {\n        this.state._active = false;\n        this.compute(event);\n        this.emit();\n      }\n    }\n  }, {\n    key: \"pointerEnd\",\n    value: function pointerEnd(event) {\n      var state = this.state;\n      this.ctrl.setEventIds(event);\n\n      try {\n        event.target.releasePointerCapture(event.pointerId);\n      } catch (_unused) {}\n\n      if (state._pointerEvents.has(event.pointerId)) {\n        state._pointerEvents.delete(event.pointerId);\n      }\n\n      if (!state._active) return;\n\n      if (state._pointerEvents.size < 2) {\n        state._active = false;\n        this.compute(event);\n        this.emit();\n      }\n    }\n  }, {\n    key: \"gestureStart\",\n    value: function gestureStart(event) {\n      if (event.cancelable) event.preventDefault();\n      var state = this.state;\n      if (state._active) return;\n      this.start(event);\n      this.computeValues([event.scale, event.rotation]);\n      state.origin = [event.clientX, event.clientY];\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"gestureMove\",\n    value: function gestureMove(event) {\n      if (event.cancelable) event.preventDefault();\n      if (!this.state._active) return;\n      var state = this.state;\n      this.computeValues([event.scale, event.rotation]);\n      state.origin = [event.clientX, event.clientY];\n      var _previousMovement = state._movement;\n      state._movement = [event.scale - 1, event.rotation];\n      state._delta = V.sub(state._movement, _previousMovement);\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"gestureEnd\",\n    value: function gestureEnd(event) {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"wheel\",\n    value: function wheel(event) {\n      var modifierKey = this.config.modifierKey;\n      if (modifierKey && !event[modifierKey]) return;\n      if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n      this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n    }\n  }, {\n    key: \"wheelStart\",\n    value: function wheelStart(event) {\n      this.start(event);\n      this.wheelChange(event);\n    }\n  }, {\n    key: \"wheelChange\",\n    value: function wheelChange(event) {\n      var isR3f = ('uv' in event);\n\n      if (!isR3f) {\n        if (event.cancelable) {\n          event.preventDefault();\n        }\n\n        if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n          console.warn(\"[@use-gesture]: To properly support zoom on trackpads, try using the `target` option.\\n\\nThis message will only appear in development mode.\");\n        }\n      }\n\n      var state = this.state;\n      state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n      V.addTo(state._movement, state._delta);\n      this.state.origin = [event.clientX, event.clientY];\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"wheelEnd\",\n    value: function wheelEnd() {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute();\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      var device = this.config.device;\n\n      if (!!device) {\n        bindFunction(device, 'start', this[device + 'Start'].bind(this));\n        bindFunction(device, 'change', this[device + 'Move'].bind(this));\n        bindFunction(device, 'end', this[device + 'End'].bind(this));\n        bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n      } else {\n        bindFunction('wheel', '', this.wheel.bind(this), {\n          passive: false\n        });\n      }\n    }\n  }]);\n\n  return PinchEngine;\n}(Engine);\n\nvar pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device: function device(_v, _k, _ref11) {\n    var shared = _ref11.shared,\n        _ref11$pointer = _ref11.pointer;\n    _ref11$pointer = _ref11$pointer === void 0 ? {} : _ref11$pointer;\n    var _ref11$pointer$touch = _ref11$pointer.touch,\n        touch = _ref11$pointer$touch === void 0 ? false : _ref11$pointer$touch;\n    var sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n  bounds: function bounds(_v, _k, _ref12) {\n    var _ref12$scaleBounds = _ref12.scaleBounds,\n        scaleBounds = _ref12$scaleBounds === void 0 ? {} : _ref12$scaleBounds,\n        _ref12$angleBounds = _ref12.angleBounds,\n        angleBounds = _ref12$angleBounds === void 0 ? {} : _ref12$angleBounds;\n\n    var _scaleBounds = function _scaleBounds(state) {\n      var D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    var _angleBounds = function _angleBounds(state) {\n      var A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return function (state) {\n      return [_scaleBounds(state), _angleBounds(state)];\n    };\n  },\n  threshold: function threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    var threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  },\n  modifierKey: function modifierKey(value) {\n    if (value === undefined) return 'ctrlKey';\n    return value;\n  }\n});\n\nvar MoveEngine = /*#__PURE__*/function (_CoordinatesEngine2) {\n  _inherits(MoveEngine, _CoordinatesEngine2);\n\n  var _super4 = _createSuper(MoveEngine);\n\n  function MoveEngine() {\n    var _this8;\n\n    _classCallCheck(this, MoveEngine);\n\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    _this8 = _super4.call.apply(_super4, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this8), \"ingKey\", 'moving');\n\n    return _this8;\n  }\n\n  _createClass(MoveEngine, [{\n    key: \"move\",\n    value: function move(event) {\n      if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n      if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n      this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n    }\n  }, {\n    key: \"moveStart\",\n    value: function moveStart(event) {\n      this.start(event);\n      this.computeValues(pointerValues(event));\n      this.compute(event);\n      this.computeInitial();\n      this.emit();\n    }\n  }, {\n    key: \"moveChange\",\n    value: function moveChange(event) {\n      if (!this.state._active) return;\n      var values = pointerValues(event);\n      var state = this.state;\n      state._delta = V.sub(values, state._values);\n      V.addTo(state._movement, state._delta);\n      this.computeValues(values);\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"moveEnd\",\n    value: function moveEnd(event) {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      bindFunction('pointer', 'change', this.move.bind(this));\n      bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n    }\n  }]);\n\n  return MoveEngine;\n}(CoordinatesEngine);\n\nvar moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: function mouseOnly() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\n\nvar ScrollEngine = /*#__PURE__*/function (_CoordinatesEngine3) {\n  _inherits(ScrollEngine, _CoordinatesEngine3);\n\n  var _super5 = _createSuper(ScrollEngine);\n\n  function ScrollEngine() {\n    var _this9;\n\n    _classCallCheck(this, ScrollEngine);\n\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    _this9 = _super5.call.apply(_super5, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this9), \"ingKey\", 'scrolling');\n\n    return _this9;\n  }\n\n  _createClass(ScrollEngine, [{\n    key: \"scroll\",\n    value: function scroll(event) {\n      if (!this.state._active) this.start(event);\n      this.scrollChange(event);\n      this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n    }\n  }, {\n    key: \"scrollChange\",\n    value: function scrollChange(event) {\n      if (event.cancelable) event.preventDefault();\n      var state = this.state;\n      var values = scrollValues(event);\n      state._delta = V.sub(values, state._values);\n      V.addTo(state._movement, state._delta);\n      this.computeValues(values);\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"scrollEnd\",\n    value: function scrollEnd() {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute();\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      bindFunction('scroll', '', this.scroll.bind(this));\n    }\n  }]);\n\n  return ScrollEngine;\n}(CoordinatesEngine);\n\nvar scrollConfigResolver = coordinatesConfigResolver;\n\nvar WheelEngine = /*#__PURE__*/function (_CoordinatesEngine4) {\n  _inherits(WheelEngine, _CoordinatesEngine4);\n\n  var _super6 = _createSuper(WheelEngine);\n\n  function WheelEngine() {\n    var _this10;\n\n    _classCallCheck(this, WheelEngine);\n\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n\n    _this10 = _super6.call.apply(_super6, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this10), \"ingKey\", 'wheeling');\n\n    return _this10;\n  }\n\n  _createClass(WheelEngine, [{\n    key: \"wheel\",\n    value: function wheel(event) {\n      if (!this.state._active) this.start(event);\n      this.wheelChange(event);\n      this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n    }\n  }, {\n    key: \"wheelChange\",\n    value: function wheelChange(event) {\n      var state = this.state;\n      state._delta = wheelValues(event);\n      V.addTo(state._movement, state._delta);\n\n      var _state$overflow = _slicedToArray(state.overflow, 2),\n          ox = _state$overflow[0],\n          oy = _state$overflow[1];\n\n      var _state$_delta = _slicedToArray(state._delta, 2),\n          dx = _state$_delta[0],\n          dy = _state$_delta[1];\n\n      var _state$_direction = _slicedToArray(state._direction, 2),\n          dirx = _state$_direction[0],\n          diry = _state$_direction[1];\n\n      if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n        state._movement[0] = state._movementBound[0];\n      }\n\n      if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n        state._movement[1] = state._movementBound[1];\n      }\n\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"wheelEnd\",\n    value: function wheelEnd() {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute();\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      bindFunction('wheel', '', this.wheel.bind(this));\n    }\n  }]);\n\n  return WheelEngine;\n}(CoordinatesEngine);\n\nvar wheelConfigResolver = coordinatesConfigResolver;\n\nvar HoverEngine = /*#__PURE__*/function (_CoordinatesEngine5) {\n  _inherits(HoverEngine, _CoordinatesEngine5);\n\n  var _super7 = _createSuper(HoverEngine);\n\n  function HoverEngine() {\n    var _this11;\n\n    _classCallCheck(this, HoverEngine);\n\n    for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n      args[_key9] = arguments[_key9];\n    }\n\n    _this11 = _super7.call.apply(_super7, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this11), \"ingKey\", 'hovering');\n\n    return _this11;\n  }\n\n  _createClass(HoverEngine, [{\n    key: \"enter\",\n    value: function enter(event) {\n      if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n      this.start(event);\n      this.computeValues(pointerValues(event));\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(event) {\n      if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n      var state = this.state;\n      if (!state._active) return;\n      state._active = false;\n      var values = pointerValues(event);\n      state._movement = state._delta = V.sub(values, state._values);\n      this.computeValues(values);\n      this.compute(event);\n      state.delta = state.movement;\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      bindFunction('pointer', 'enter', this.enter.bind(this));\n      bindFunction('pointer', 'leave', this.leave.bind(this));\n    }\n  }]);\n\n  return HoverEngine;\n}(CoordinatesEngine);\n\nvar hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: function mouseOnly() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\n\nvar EngineMap = new Map();\nvar ConfigResolverMap = new Map();\n\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\n\nvar dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nvar hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nvar moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nvar pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nvar scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nvar wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };","map":{"version":3,"names":["V","c","computeRubberband","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","EVENT_TYPE_MAP","pointer","start","change","end","mouse","touch","gesture","capitalize","string","toUpperCase","slice","actionsWithoutCaptureSupported","hasCapture","capture","actionKey","includes","toHandlerProp","device","action","deviceProps","pointerCaptureEvents","parseProp","prop","eventKey","substring","toLowerCase","passive","indexOf","replace","captureKey","toDomEventType","isTouch","event","getPointerType","pointerType","getCurrentTargetTouchList","Array","from","touches","e","_event$currentTarget","_event$currentTarget$","currentTarget","contains","call","getTouchList","type","changedTouches","targetTouches","getValueEvent","distanceAngle","P1","P2","dx","clientX","dy","clientY","cx","cy","distance","Math","hypot","angle","atan2","PI","origin","touchIds","map","identifier","touchDistanceAngle","ids","pointerId","valueEvent","pointerValues","LINE_HEIGHT","PAGE_HEIGHT","wheelValues","deltaX","deltaY","deltaMode","scrollValues","_ref","_ref2","scrollX","scrollY","scrollLeft","scrollTop","getEventDetails","payload","buttons","shiftKey","altKey","metaKey","ctrlKey","assign","v","args","noop","chain","fns","result","fn","assignDefault","fallback","BEFORE_LAST_KINEMATICS_DELAY","Engine","ctrl","state","computeValues","computeInitial","init","reset","shared","gestureEventStores","gestureTimeoutStores","config","handlers","ingKey","_active","active","_blocked","_force","_step","intentional","_movement","_distance","_direction","_delta","_bounds","Infinity","axis","undefined","memo","elapsedTime","direction","overflow","_movementBound","velocity","movement","delta","timeStamp","lastOffset","offset","startTime","values","_values","transform","_initial","initial","dt","preventDefault","cancelable","pointerIds","size","locked","document","pointerLockElement","down","pressed","_absoluteDelta","abs","addTo","axisIntent","_m0","_m1","threshold","t0","t1","hasCustomTransform","sign","v0","v1","restrictToAxis","previousOffset","gestureIsActive","first","last","bounds","setup","computeOffset","ox","oy","x0","x1","y0","y1","rubberband","sub","computeMovement","absoluteDelta","clean","triggerAllEvents","handler","aliasKey","eventStore","timeoutStore","selectAxis","absDx","absDy","CoordinatesEngine","add","axisThreshold","lockDirection","identity","DEFAULT_RUBBERBAND","commonConfigResolver","enabled","eventOptions","_k","toVector","process","env","NODE_ENV","originalTransform","r","isFinite","console","warn","domTarget","Error","NaN","DEFAULT_AXIS_THRESHOLD","coordinatesConfigResolver","_v","current","HTMLElement","left","right","top","bottom","DISPLACEMENT","KEYS_DELTA_MAP","ArrowRight","factor","ArrowLeft","ArrowUp","ArrowDown","DragEngine","_pointerId","_pointerActive","_keyboardActive","_preventScroll","_delayed","swipe","tap","canceled","cancel","bind","boundRect","getBoundingClientRect","targetRect","setTimeout","compute","emit","pointerClean","isArray","pointerButtons","ctrlIds","setEventIds","pointerCapture","setPointerCapture","setupPointer","preventScrollAxis","setupScrollPrevention","delay","setupDelayTrigger","startPointerDrag","id","movementX","movementY","remove","hasPointerCapture","releasePointerCapture","_unused","setActive","tapsThreshold","filterTaps","dirx","diry","vx","vy","mx","my","svx","svy","sx","sy","sdt","duration","stopPropagation","preventScrollDelay","sourceEvent","style","window","getComputedStyle","touchAction","_unused2","pointerLock","requestPointerLock","sharedConfig","pointerMove","pointerUp","exitPointerLock","persistEvent","preventScroll","deltaFn","bindFunction","pointerDown","keyDown","keyUp","pointerClick","persist","isBrowser","createElement","supportsTouchEvents","isTouchScreen","navigator","maxTouchPoints","supportsPointerEvents","supportsPointerLock","supportsGestureEvents","GestureEvent","SUPPORT","touchscreen","DEFAULT_PREVENT_SCROLL_DELAY","DEFAULT_DRAG_DELAY","DEFAULT_SWIPE_VELOCITY","DEFAULT_SWIPE_DISTANCE","DEFAULT_SWIPE_DURATION","DEFAULT_DRAG_AXIS_THRESHOLD","pen","dragConfigResolver","lock","useTouch","experimental_preventWindowScrollY","swipeVelocity","swipeDistance","swipeDuration","SCALE_ANGLE_RATIO_INTENT_DEG","PINCH_WHEEL_RATIO","PinchEngine","_pointerEvents","Map","_touchIds","turns","axisMovementDifference","ctrlTouchIds","every","has","pinchStart","ctrlPointerIds","set","pinchMove","prev_a","delta_a","delta_turns","some","delete","scale","rotation","_previousMovement","modifierKey","wheelStart","wheelChange","wheelEnd","isR3f","defaultPrevented","wheel","pinchConfigResolver","scaleBounds","angleBounds","_scaleBounds","D","min","max","_angleBounds","A","MoveEngine","mouseOnly","moveStart","moveChange","moveEnd","move","moveConfigResolver","ScrollEngine","scrollChange","scrollEnd","scroll","scrollConfigResolver","WheelEngine","wheelConfigResolver","HoverEngine","enter","leave","hoverConfigResolver","EngineMap","ConfigResolverMap","registerAction","engine","resolver","dragAction","hoverAction","moveAction","pinchAction","scrollAction","wheelAction","C","E","S","_","a","b","d","f","h","m","p","s","t","w"],"sources":["D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@use-gesture/core/dist/actions-1416bf77.esm.js"],"sourcesContent":["import { V, c as computeRubberband } from './maths-b2a210f4.esm.js';\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n  if (key in obj) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n  } else {\r\n    obj[key] = value;\r\n  }\r\n\r\n  return obj;\r\n}\r\n\r\nfunction ownKeys(object, enumerableOnly) {\r\n  var keys = Object.keys(object);\r\n\r\n  if (Object.getOwnPropertySymbols) {\r\n    var symbols = Object.getOwnPropertySymbols(object);\r\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\r\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\r\n    })), keys.push.apply(keys, symbols);\r\n  }\r\n\r\n  return keys;\r\n}\r\n\r\nfunction _objectSpread2(target) {\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    var source = null != arguments[i] ? arguments[i] : {};\r\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\r\n      _defineProperty(target, key, source[key]);\r\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\r\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\r\n    });\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nconst EVENT_TYPE_MAP = {\r\n  pointer: {\r\n    start: 'down',\r\n    change: 'move',\r\n    end: 'up'\r\n  },\r\n  mouse: {\r\n    start: 'down',\r\n    change: 'move',\r\n    end: 'up'\r\n  },\r\n  touch: {\r\n    start: 'start',\r\n    change: 'move',\r\n    end: 'end'\r\n  },\r\n  gesture: {\r\n    start: 'start',\r\n    change: 'change',\r\n    end: 'end'\r\n  }\r\n};\r\n\r\nfunction capitalize(string) {\r\n  if (!string) return '';\r\n  return string[0].toUpperCase() + string.slice(1);\r\n}\r\n\r\nconst actionsWithoutCaptureSupported = ['enter', 'leave'];\r\n\r\nfunction hasCapture(capture = false, actionKey) {\r\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\r\n}\r\n\r\nfunction toHandlerProp(device, action = '', capture = false) {\r\n  const deviceProps = EVENT_TYPE_MAP[device];\r\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\r\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\r\n}\r\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\r\nfunction parseProp(prop) {\r\n  let eventKey = prop.substring(2).toLowerCase();\r\n  const passive = !!~eventKey.indexOf('passive');\r\n  if (passive) eventKey = eventKey.replace('passive', '');\r\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\r\n  const capture = !!~eventKey.indexOf(captureKey);\r\n  if (capture) eventKey = eventKey.replace('capture', '');\r\n  return {\r\n    device: eventKey,\r\n    capture,\r\n    passive\r\n  };\r\n}\r\nfunction toDomEventType(device, action = '') {\r\n  const deviceProps = EVENT_TYPE_MAP[device];\r\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\r\n  return device + actionKey;\r\n}\r\nfunction isTouch(event) {\r\n  return 'touches' in event;\r\n}\r\nfunction getPointerType(event) {\r\n  if (isTouch(event)) return 'touch';\r\n  if ('pointerType' in event) return event.pointerType;\r\n  return 'mouse';\r\n}\r\n\r\nfunction getCurrentTargetTouchList(event) {\r\n  return Array.from(event.touches).filter(e => {\r\n    var _event$currentTarget, _event$currentTarget$;\r\n\r\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\r\n  });\r\n}\r\n\r\nfunction getTouchList(event) {\r\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\r\n}\r\n\r\nfunction getValueEvent(event) {\r\n  return isTouch(event) ? getTouchList(event)[0] : event;\r\n}\r\n\r\nfunction distanceAngle(P1, P2) {\r\n  const dx = P2.clientX - P1.clientX;\r\n  const dy = P2.clientY - P1.clientY;\r\n  const cx = (P2.clientX + P1.clientX) / 2;\r\n  const cy = (P2.clientY + P1.clientY) / 2;\r\n  const distance = Math.hypot(dx, dy);\r\n  const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\r\n  const origin = [cx, cy];\r\n  return {\r\n    angle,\r\n    distance,\r\n    origin\r\n  };\r\n}\r\nfunction touchIds(event) {\r\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\r\n}\r\nfunction touchDistanceAngle(event, ids) {\r\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\r\n  return distanceAngle(P1, P2);\r\n}\r\nfunction pointerId(event) {\r\n  const valueEvent = getValueEvent(event);\r\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\r\n}\r\nfunction pointerValues(event) {\r\n  const valueEvent = getValueEvent(event);\r\n  return [valueEvent.clientX, valueEvent.clientY];\r\n}\r\nconst LINE_HEIGHT = 40;\r\nconst PAGE_HEIGHT = 800;\r\nfunction wheelValues(event) {\r\n  let {\r\n    deltaX,\r\n    deltaY,\r\n    deltaMode\r\n  } = event;\r\n\r\n  if (deltaMode === 1) {\r\n    deltaX *= LINE_HEIGHT;\r\n    deltaY *= LINE_HEIGHT;\r\n  } else if (deltaMode === 2) {\r\n    deltaX *= PAGE_HEIGHT;\r\n    deltaY *= PAGE_HEIGHT;\r\n  }\r\n\r\n  return [deltaX, deltaY];\r\n}\r\nfunction scrollValues(event) {\r\n  var _ref, _ref2;\r\n\r\n  const {\r\n    scrollX,\r\n    scrollY,\r\n    scrollLeft,\r\n    scrollTop\r\n  } = event.currentTarget;\r\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\r\n}\r\nfunction getEventDetails(event) {\r\n  const payload = {};\r\n  if ('buttons' in event) payload.buttons = event.buttons;\r\n\r\n  if ('shiftKey' in event) {\r\n    const {\r\n      shiftKey,\r\n      altKey,\r\n      metaKey,\r\n      ctrlKey\r\n    } = event;\r\n    Object.assign(payload, {\r\n      shiftKey,\r\n      altKey,\r\n      metaKey,\r\n      ctrlKey\r\n    });\r\n  }\r\n\r\n  return payload;\r\n}\r\n\r\nfunction call(v, ...args) {\r\n  if (typeof v === 'function') {\r\n    return v(...args);\r\n  } else {\r\n    return v;\r\n  }\r\n}\r\nfunction noop() {}\r\nfunction chain(...fns) {\r\n  if (fns.length === 0) return noop;\r\n  if (fns.length === 1) return fns[0];\r\n  return function () {\r\n    let result;\r\n\r\n    for (const fn of fns) {\r\n      result = fn.apply(this, arguments) || result;\r\n    }\r\n\r\n    return result;\r\n  };\r\n}\r\nfunction assignDefault(value, fallback) {\r\n  return Object.assign({}, fallback, value || {});\r\n}\r\n\r\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\r\nclass Engine {\r\n  constructor(ctrl, args, key) {\r\n    this.ctrl = ctrl;\r\n    this.args = args;\r\n    this.key = key;\r\n\r\n    if (!this.state) {\r\n      this.state = {};\r\n      this.computeValues([0, 0]);\r\n      this.computeInitial();\r\n      if (this.init) this.init();\r\n      this.reset();\r\n    }\r\n  }\r\n\r\n  get state() {\r\n    return this.ctrl.state[this.key];\r\n  }\r\n\r\n  set state(state) {\r\n    this.ctrl.state[this.key] = state;\r\n  }\r\n\r\n  get shared() {\r\n    return this.ctrl.state.shared;\r\n  }\r\n\r\n  get eventStore() {\r\n    return this.ctrl.gestureEventStores[this.key];\r\n  }\r\n\r\n  get timeoutStore() {\r\n    return this.ctrl.gestureTimeoutStores[this.key];\r\n  }\r\n\r\n  get config() {\r\n    return this.ctrl.config[this.key];\r\n  }\r\n\r\n  get sharedConfig() {\r\n    return this.ctrl.config.shared;\r\n  }\r\n\r\n  get handler() {\r\n    return this.ctrl.handlers[this.key];\r\n  }\r\n\r\n  reset() {\r\n    const {\r\n      state,\r\n      shared,\r\n      ingKey,\r\n      args\r\n    } = this;\r\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\r\n    state._step = [false, false];\r\n    state.intentional = false;\r\n    state._movement = [0, 0];\r\n    state._distance = [0, 0];\r\n    state._direction = [0, 0];\r\n    state._delta = [0, 0];\r\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\r\n    state.args = args;\r\n    state.axis = undefined;\r\n    state.memo = undefined;\r\n    state.elapsedTime = 0;\r\n    state.direction = [0, 0];\r\n    state.distance = [0, 0];\r\n    state.overflow = [0, 0];\r\n    state._movementBound = [false, false];\r\n    state.velocity = [0, 0];\r\n    state.movement = [0, 0];\r\n    state.delta = [0, 0];\r\n    state.timeStamp = 0;\r\n  }\r\n\r\n  start(event) {\r\n    const state = this.state;\r\n    const config = this.config;\r\n\r\n    if (!state._active) {\r\n      this.reset();\r\n      this.computeInitial();\r\n      state._active = true;\r\n      state.target = event.target;\r\n      state.currentTarget = event.currentTarget;\r\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\r\n      state.offset = state.lastOffset;\r\n    }\r\n\r\n    state.startTime = state.timeStamp = event.timeStamp;\r\n  }\r\n\r\n  computeValues(values) {\r\n    const state = this.state;\r\n    state._values = values;\r\n    state.values = this.config.transform(values);\r\n  }\r\n\r\n  computeInitial() {\r\n    const state = this.state;\r\n    state._initial = state._values;\r\n    state.initial = state.values;\r\n  }\r\n\r\n  compute(event) {\r\n    const {\r\n      state,\r\n      config,\r\n      shared\r\n    } = this;\r\n    state.args = this.args;\r\n    let dt = 0;\r\n\r\n    if (event) {\r\n      state.event = event;\r\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\r\n      state.type = event.type;\r\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\r\n      shared.locked = !!document.pointerLockElement;\r\n      Object.assign(shared, getEventDetails(event));\r\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\r\n      dt = event.timeStamp - state.timeStamp;\r\n      state.timeStamp = event.timeStamp;\r\n      state.elapsedTime = state.timeStamp - state.startTime;\r\n    }\r\n\r\n    if (state._active) {\r\n      const _absoluteDelta = state._delta.map(Math.abs);\r\n\r\n      V.addTo(state._distance, _absoluteDelta);\r\n    }\r\n\r\n    if (this.axisIntent) this.axisIntent(event);\r\n    const [_m0, _m1] = state._movement;\r\n    const [t0, t1] = config.threshold;\r\n    const {\r\n      _step,\r\n      values\r\n    } = state;\r\n\r\n    if (config.hasCustomTransform) {\r\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\r\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\r\n    } else {\r\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\r\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\r\n    }\r\n\r\n    state.intentional = _step[0] !== false || _step[1] !== false;\r\n    if (!state.intentional) return;\r\n    const movement = [0, 0];\r\n\r\n    if (config.hasCustomTransform) {\r\n      const [v0, v1] = values;\r\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\r\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\r\n    } else {\r\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\r\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\r\n    }\r\n\r\n    if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\r\n    const previousOffset = state.offset;\r\n    const gestureIsActive = state._active && !state._blocked || state.active;\r\n\r\n    if (gestureIsActive) {\r\n      state.first = state._active && !state.active;\r\n      state.last = !state._active && state.active;\r\n      state.active = shared[this.ingKey] = state._active;\r\n\r\n      if (event) {\r\n        if (state.first) {\r\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\r\n          if (this.setup) this.setup();\r\n        }\r\n\r\n        state.movement = movement;\r\n        this.computeOffset();\r\n      }\r\n    }\r\n\r\n    const [ox, oy] = state.offset;\r\n    const [[x0, x1], [y0, y1]] = state._bounds;\r\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\r\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\r\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\r\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\r\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\r\n    state.delta = V.sub(state.offset, previousOffset);\r\n    this.computeMovement();\r\n\r\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\r\n      state.delta = V.sub(state.offset, previousOffset);\r\n      const absoluteDelta = state.delta.map(Math.abs);\r\n      V.addTo(state.distance, absoluteDelta);\r\n      state.direction = state.delta.map(Math.sign);\r\n      state._direction = state._delta.map(Math.sign);\r\n\r\n      if (!state.first && dt > 0) {\r\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\r\n      }\r\n    }\r\n  }\r\n\r\n  emit() {\r\n    const state = this.state;\r\n    const shared = this.shared;\r\n    const config = this.config;\r\n    if (!state._active) this.clean();\r\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\r\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\r\n      [this.aliasKey]: state.values\r\n    }));\r\n    if (memo !== undefined) state.memo = memo;\r\n  }\r\n\r\n  clean() {\r\n    this.eventStore.clean();\r\n    this.timeoutStore.clean();\r\n  }\r\n\r\n}\r\n\r\nfunction selectAxis([dx, dy], threshold) {\r\n  const absDx = Math.abs(dx);\r\n  const absDy = Math.abs(dy);\r\n\r\n  if (absDx > absDy && absDx > threshold) {\r\n    return 'x';\r\n  }\r\n\r\n  if (absDy > absDx && absDy > threshold) {\r\n    return 'y';\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nclass CoordinatesEngine extends Engine {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    _defineProperty(this, \"aliasKey\", 'xy');\r\n  }\r\n\r\n  reset() {\r\n    super.reset();\r\n    this.state.axis = undefined;\r\n  }\r\n\r\n  init() {\r\n    this.state.offset = [0, 0];\r\n    this.state.lastOffset = [0, 0];\r\n  }\r\n\r\n  computeOffset() {\r\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\r\n  }\r\n\r\n  computeMovement() {\r\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\r\n  }\r\n\r\n  axisIntent(event) {\r\n    const state = this.state;\r\n    const config = this.config;\r\n\r\n    if (!state.axis && event) {\r\n      const threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\r\n      state.axis = selectAxis(state._movement, threshold);\r\n    }\r\n\r\n    state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\r\n  }\r\n\r\n  restrictToAxis(v) {\r\n    if (this.config.axis || this.config.lockDirection) {\r\n      switch (this.state.axis) {\r\n        case 'x':\r\n          v[1] = 0;\r\n          break;\r\n\r\n        case 'y':\r\n          v[0] = 0;\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nconst identity = v => v;\r\nconst DEFAULT_RUBBERBAND = 0.15;\r\nconst commonConfigResolver = {\r\n  enabled(value = true) {\r\n    return value;\r\n  },\r\n\r\n  eventOptions(value, _k, config) {\r\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\r\n  },\r\n\r\n  preventDefault(value = false) {\r\n    return value;\r\n  },\r\n\r\n  triggerAllEvents(value = false) {\r\n    return value;\r\n  },\r\n\r\n  rubberband(value = 0) {\r\n    switch (value) {\r\n      case true:\r\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\r\n\r\n      case false:\r\n        return [0, 0];\r\n\r\n      default:\r\n        return V.toVector(value);\r\n    }\r\n  },\r\n\r\n  from(value) {\r\n    if (typeof value === 'function') return value;\r\n    if (value != null) return V.toVector(value);\r\n  },\r\n\r\n  transform(value, _k, config) {\r\n    const transform = value || config.shared.transform;\r\n    this.hasCustomTransform = !!transform;\r\n\r\n    if (process.env.NODE_ENV === 'development') {\r\n      const originalTransform = transform || identity;\r\n      return v => {\r\n        const r = originalTransform(v);\r\n\r\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\r\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\r\n        }\r\n\r\n        return r;\r\n      };\r\n    }\r\n\r\n    return transform || identity;\r\n  },\r\n\r\n  threshold(value) {\r\n    return V.toVector(value, 0);\r\n  }\r\n\r\n};\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  Object.assign(commonConfigResolver, {\r\n    domTarget(value) {\r\n      if (value !== undefined) {\r\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\r\n      }\r\n\r\n      return NaN;\r\n    },\r\n\r\n    lockDirection(value) {\r\n      if (value !== undefined) {\r\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\r\n      }\r\n\r\n      return NaN;\r\n    },\r\n\r\n    initial(value) {\r\n      if (value !== undefined) {\r\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\r\n      }\r\n\r\n      return NaN;\r\n    }\r\n\r\n  });\r\n}\r\n\r\nconst DEFAULT_AXIS_THRESHOLD = 0;\r\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\r\n  axis(_v, _k, {\r\n    axis\r\n  }) {\r\n    this.lockDirection = axis === 'lock';\r\n    if (!this.lockDirection) return axis;\r\n  },\r\n\r\n  axisThreshold(value = DEFAULT_AXIS_THRESHOLD) {\r\n    return value;\r\n  },\r\n\r\n  bounds(value = {}) {\r\n    if (typeof value === 'function') {\r\n      return state => coordinatesConfigResolver.bounds(value(state));\r\n    }\r\n\r\n    if ('current' in value) {\r\n      return () => value.current;\r\n    }\r\n\r\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\r\n      return value;\r\n    }\r\n\r\n    const {\r\n      left = -Infinity,\r\n      right = Infinity,\r\n      top = -Infinity,\r\n      bottom = Infinity\r\n    } = value;\r\n    return [[left, right], [top, bottom]];\r\n  }\r\n\r\n});\r\n\r\nconst DISPLACEMENT = 10;\r\nconst KEYS_DELTA_MAP = {\r\n  ArrowRight: (factor = 1) => [DISPLACEMENT * factor, 0],\r\n  ArrowLeft: (factor = 1) => [-DISPLACEMENT * factor, 0],\r\n  ArrowUp: (factor = 1) => [0, -DISPLACEMENT * factor],\r\n  ArrowDown: (factor = 1) => [0, DISPLACEMENT * factor]\r\n};\r\nclass DragEngine extends CoordinatesEngine {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    _defineProperty(this, \"ingKey\", 'dragging');\r\n  }\r\n\r\n  reset() {\r\n    super.reset();\r\n    const state = this.state;\r\n    state._pointerId = undefined;\r\n    state._pointerActive = false;\r\n    state._keyboardActive = false;\r\n    state._preventScroll = false;\r\n    state._delayed = false;\r\n    state.swipe = [0, 0];\r\n    state.tap = false;\r\n    state.canceled = false;\r\n    state.cancel = this.cancel.bind(this);\r\n  }\r\n\r\n  setup() {\r\n    const state = this.state;\r\n\r\n    if (state._bounds instanceof HTMLElement) {\r\n      const boundRect = state._bounds.getBoundingClientRect();\r\n\r\n      const targetRect = state.currentTarget.getBoundingClientRect();\r\n      const _bounds = {\r\n        left: boundRect.left - targetRect.left + state.offset[0],\r\n        right: boundRect.right - targetRect.right + state.offset[0],\r\n        top: boundRect.top - targetRect.top + state.offset[1],\r\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\r\n      };\r\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    const state = this.state;\r\n    if (state.canceled) return;\r\n    state.canceled = true;\r\n    state._active = false;\r\n    setTimeout(() => {\r\n      this.compute();\r\n      this.emit();\r\n    }, 0);\r\n  }\r\n\r\n  setActive() {\r\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\r\n  }\r\n\r\n  clean() {\r\n    this.pointerClean();\r\n    this.state._pointerActive = false;\r\n    this.state._keyboardActive = false;\r\n    super.clean();\r\n  }\r\n\r\n  pointerDown(event) {\r\n    const config = this.config;\r\n    const state = this.state;\r\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\r\n    const ctrlIds = this.ctrl.setEventIds(event);\r\n\r\n    if (config.pointerCapture) {\r\n      event.target.setPointerCapture(event.pointerId);\r\n    }\r\n\r\n    if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\r\n    this.start(event);\r\n    this.setupPointer(event);\r\n    state._pointerId = pointerId(event);\r\n    state._pointerActive = true;\r\n    this.computeValues(pointerValues(event));\r\n    this.computeInitial();\r\n\r\n    if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\r\n      state._active = false;\r\n      this.setupScrollPrevention(event);\r\n    } else if (config.delay > 0) {\r\n      this.setupDelayTrigger(event);\r\n\r\n      if (config.triggerAllEvents) {\r\n        this.compute(event);\r\n        this.emit();\r\n      }\r\n    } else {\r\n      this.startPointerDrag(event);\r\n    }\r\n  }\r\n\r\n  startPointerDrag(event) {\r\n    const state = this.state;\r\n    state._active = true;\r\n    state._preventScroll = true;\r\n    state._delayed = false;\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  pointerMove(event) {\r\n    const state = this.state;\r\n    const config = this.config;\r\n    if (!state._pointerActive) return;\r\n    if (state.type === event.type && event.timeStamp === state.timeStamp) return;\r\n    const id = pointerId(event);\r\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\r\n\r\n    const _values = pointerValues(event);\r\n\r\n    if (document.pointerLockElement === event.target) {\r\n      state._delta = [event.movementX, event.movementY];\r\n    } else {\r\n      state._delta = V.sub(_values, state._values);\r\n      this.computeValues(_values);\r\n    }\r\n\r\n    V.addTo(state._movement, state._delta);\r\n    this.compute(event);\r\n\r\n    if (state._delayed && state.intentional) {\r\n      this.timeoutStore.remove('dragDelay');\r\n      state.active = false;\r\n      this.startPointerDrag(event);\r\n      return;\r\n    }\r\n\r\n    if (config.preventScrollAxis && !state._preventScroll) {\r\n      if (state.axis) {\r\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\r\n          state._active = false;\r\n          this.clean();\r\n          return;\r\n        } else {\r\n          this.timeoutStore.remove('startPointerDrag');\r\n          this.startPointerDrag(event);\r\n          return;\r\n        }\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.emit();\r\n  }\r\n\r\n  pointerUp(event) {\r\n    this.ctrl.setEventIds(event);\r\n\r\n    try {\r\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\r\n        ;\r\n        event.target.releasePointerCapture(event.pointerId);\r\n      }\r\n    } catch (_unused) {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\r\n      }\r\n    }\r\n\r\n    const state = this.state;\r\n    const config = this.config;\r\n    if (!state._active || !state._pointerActive) return;\r\n    const id = pointerId(event);\r\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\r\n    this.state._pointerActive = false;\r\n    this.setActive();\r\n    this.compute(event);\r\n    const [dx, dy] = state._distance;\r\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\r\n\r\n    if (state.tap && config.filterTaps) {\r\n      state._force = true;\r\n    } else {\r\n      const [dirx, diry] = state.direction;\r\n      const [vx, vy] = state.velocity;\r\n      const [mx, my] = state.movement;\r\n      const [svx, svy] = config.swipe.velocity;\r\n      const [sx, sy] = config.swipe.distance;\r\n      const sdt = config.swipe.duration;\r\n\r\n      if (state.elapsedTime < sdt) {\r\n        if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\r\n        if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\r\n      }\r\n    }\r\n\r\n    this.emit();\r\n  }\r\n\r\n  pointerClick(event) {\r\n    if (!this.state.tap) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n  }\r\n\r\n  setupPointer(event) {\r\n    const config = this.config;\r\n    const device = config.device;\r\n\r\n    if (process.env.NODE_ENV === 'development') {\r\n      try {\r\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\r\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\r\n          const style = window.getComputedStyle(currentTarget);\r\n\r\n          if (style.touchAction === 'auto') {\r\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\r\n          }\r\n        }\r\n      } catch (_unused2) {}\r\n    }\r\n\r\n    if (config.pointerLock) {\r\n      event.currentTarget.requestPointerLock();\r\n    }\r\n\r\n    if (!config.pointerCapture) {\r\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\r\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\r\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\r\n    }\r\n  }\r\n\r\n  pointerClean() {\r\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\r\n      document.exitPointerLock();\r\n    }\r\n  }\r\n\r\n  preventScroll(event) {\r\n    if (this.state._preventScroll && event.cancelable) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  setupScrollPrevention(event) {\r\n    this.state._preventScroll = false;\r\n    persistEvent(event);\r\n    const remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\r\n      passive: false\r\n    });\r\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\r\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\r\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\r\n  }\r\n\r\n  setupDelayTrigger(event) {\r\n    this.state._delayed = true;\r\n    this.timeoutStore.add('dragDelay', () => {\r\n      this.state._step = [0, 0];\r\n      this.startPointerDrag(event);\r\n    }, this.config.delay);\r\n  }\r\n\r\n  keyDown(event) {\r\n    const deltaFn = KEYS_DELTA_MAP[event.key];\r\n\r\n    if (deltaFn) {\r\n      const state = this.state;\r\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\r\n      this.start(event);\r\n      state._delta = deltaFn(factor);\r\n      state._keyboardActive = true;\r\n      V.addTo(state._movement, state._delta);\r\n      this.compute(event);\r\n      this.emit();\r\n    }\r\n  }\r\n\r\n  keyUp(event) {\r\n    if (!(event.key in KEYS_DELTA_MAP)) return;\r\n    this.state._keyboardActive = false;\r\n    this.setActive();\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  bind(bindFunction) {\r\n    const device = this.config.device;\r\n    bindFunction(device, 'start', this.pointerDown.bind(this));\r\n\r\n    if (this.config.pointerCapture) {\r\n      bindFunction(device, 'change', this.pointerMove.bind(this));\r\n      bindFunction(device, 'end', this.pointerUp.bind(this));\r\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\r\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\r\n    }\r\n\r\n    bindFunction('key', 'down', this.keyDown.bind(this));\r\n    bindFunction('key', 'up', this.keyUp.bind(this));\r\n\r\n    if (this.config.filterTaps) {\r\n      bindFunction('click', '', this.pointerClick.bind(this), {\r\n        capture: true,\r\n        passive: false\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\r\nfunction persistEvent(event) {\r\n  'persist' in event && typeof event.persist === 'function' && event.persist();\r\n}\r\n\r\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\r\n\r\nfunction supportsTouchEvents() {\r\n  return isBrowser && 'ontouchstart' in window;\r\n}\r\n\r\nfunction isTouchScreen() {\r\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\r\n}\r\n\r\nfunction supportsPointerEvents() {\r\n  return isBrowser && 'onpointerdown' in window;\r\n}\r\n\r\nfunction supportsPointerLock() {\r\n  return isBrowser && 'exitPointerLock' in window.document;\r\n}\r\n\r\nfunction supportsGestureEvents() {\r\n  try {\r\n    return 'constructor' in GestureEvent;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\n\r\nconst SUPPORT = {\r\n  isBrowser,\r\n  gesture: supportsGestureEvents(),\r\n  touch: isTouchScreen(),\r\n  touchscreen: isTouchScreen(),\r\n  pointer: supportsPointerEvents(),\r\n  pointerLock: supportsPointerLock()\r\n};\r\n\r\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\r\nconst DEFAULT_DRAG_DELAY = 180;\r\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\r\nconst DEFAULT_SWIPE_DISTANCE = 50;\r\nconst DEFAULT_SWIPE_DURATION = 250;\r\nconst DEFAULT_DRAG_AXIS_THRESHOLD = {\r\n  mouse: 0,\r\n  touch: 0,\r\n  pen: 8\r\n};\r\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\r\n  device(_v, _k, {\r\n    pointer: {\r\n      touch = false,\r\n      lock = false,\r\n      mouse = false\r\n    } = {}\r\n  }) {\r\n    this.pointerLock = lock && SUPPORT.pointerLock;\r\n    if (SUPPORT.touch && touch) return 'touch';\r\n    if (this.pointerLock) return 'mouse';\r\n    if (SUPPORT.pointer && !mouse) return 'pointer';\r\n    if (SUPPORT.touch) return 'touch';\r\n    return 'mouse';\r\n  },\r\n\r\n  preventScrollAxis(value, _k, {\r\n    preventScroll\r\n  }) {\r\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\r\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\r\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\r\n  },\r\n\r\n  pointerCapture(_v, _k, {\r\n    pointer: {\r\n      capture = true,\r\n      buttons = 1\r\n    } = {}\r\n  }) {\r\n    this.pointerButtons = buttons;\r\n    return !this.pointerLock && this.device === 'pointer' && capture;\r\n  },\r\n\r\n  threshold(value, _k, {\r\n    filterTaps = false,\r\n    tapsThreshold = 3,\r\n    axis = undefined\r\n  }) {\r\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\r\n    this.filterTaps = filterTaps;\r\n    this.tapsThreshold = tapsThreshold;\r\n    return threshold;\r\n  },\r\n\r\n  swipe({\r\n    velocity = DEFAULT_SWIPE_VELOCITY,\r\n    distance = DEFAULT_SWIPE_DISTANCE,\r\n    duration = DEFAULT_SWIPE_DURATION\r\n  } = {}) {\r\n    return {\r\n      velocity: this.transform(V.toVector(velocity)),\r\n      distance: this.transform(V.toVector(distance)),\r\n      duration\r\n    };\r\n  },\r\n\r\n  delay(value = 0) {\r\n    switch (value) {\r\n      case true:\r\n        return DEFAULT_DRAG_DELAY;\r\n\r\n      case false:\r\n        return 0;\r\n\r\n      default:\r\n        return value;\r\n    }\r\n  },\r\n\r\n  axisThreshold(value) {\r\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\r\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\r\n  }\r\n\r\n});\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  Object.assign(dragConfigResolver, {\r\n    useTouch(value) {\r\n      if (value !== undefined) {\r\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\r\n      }\r\n\r\n      return NaN;\r\n    },\r\n\r\n    experimental_preventWindowScrollY(value) {\r\n      if (value !== undefined) {\r\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\r\n      }\r\n\r\n      return NaN;\r\n    },\r\n\r\n    swipeVelocity(value) {\r\n      if (value !== undefined) {\r\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\r\n      }\r\n\r\n      return NaN;\r\n    },\r\n\r\n    swipeDistance(value) {\r\n      if (value !== undefined) {\r\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\r\n      }\r\n\r\n      return NaN;\r\n    },\r\n\r\n    swipeDuration(value) {\r\n      if (value !== undefined) {\r\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\r\n      }\r\n\r\n      return NaN;\r\n    }\r\n\r\n  });\r\n}\r\n\r\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\r\nconst PINCH_WHEEL_RATIO = 100;\r\nclass PinchEngine extends Engine {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    _defineProperty(this, \"ingKey\", 'pinching');\r\n\r\n    _defineProperty(this, \"aliasKey\", 'da');\r\n  }\r\n\r\n  init() {\r\n    this.state.offset = [1, 0];\r\n    this.state.lastOffset = [1, 0];\r\n    this.state._pointerEvents = new Map();\r\n  }\r\n\r\n  reset() {\r\n    super.reset();\r\n    const state = this.state;\r\n    state._touchIds = [];\r\n    state.canceled = false;\r\n    state.cancel = this.cancel.bind(this);\r\n    state.turns = 0;\r\n  }\r\n\r\n  computeOffset() {\r\n    const {\r\n      type,\r\n      movement,\r\n      lastOffset\r\n    } = this.state;\r\n\r\n    if (type === 'wheel') {\r\n      this.state.offset = V.add(movement, lastOffset);\r\n    } else {\r\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\r\n    }\r\n  }\r\n\r\n  computeMovement() {\r\n    const {\r\n      offset,\r\n      lastOffset\r\n    } = this.state;\r\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\r\n  }\r\n\r\n  axisIntent() {\r\n    const state = this.state;\r\n    const [_m0, _m1] = state._movement;\r\n\r\n    if (!state.axis) {\r\n      const axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\r\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\r\n    }\r\n  }\r\n\r\n  restrictToAxis(v) {\r\n    if (this.config.lockDirection) {\r\n      if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    const state = this.state;\r\n    if (state.canceled) return;\r\n    setTimeout(() => {\r\n      state.canceled = true;\r\n      state._active = false;\r\n      this.compute();\r\n      this.emit();\r\n    }, 0);\r\n  }\r\n\r\n  touchStart(event) {\r\n    this.ctrl.setEventIds(event);\r\n    const state = this.state;\r\n    const ctrlTouchIds = this.ctrl.touchIds;\r\n\r\n    if (state._active) {\r\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\r\n    }\r\n\r\n    if (ctrlTouchIds.size < 2) return;\r\n    this.start(event);\r\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\r\n    const payload = touchDistanceAngle(event, state._touchIds);\r\n    this.pinchStart(event, payload);\r\n  }\r\n\r\n  pointerStart(event) {\r\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\r\n    this.ctrl.setEventIds(event);\r\n    event.target.setPointerCapture(event.pointerId);\r\n    const state = this.state;\r\n    const _pointerEvents = state._pointerEvents;\r\n    const ctrlPointerIds = this.ctrl.pointerIds;\r\n\r\n    if (state._active) {\r\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\r\n    }\r\n\r\n    if (_pointerEvents.size < 2) {\r\n      _pointerEvents.set(event.pointerId, event);\r\n    }\r\n\r\n    if (state._pointerEvents.size < 2) return;\r\n    this.start(event);\r\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\r\n    this.pinchStart(event, payload);\r\n  }\r\n\r\n  pinchStart(event, payload) {\r\n    const state = this.state;\r\n    state.origin = payload.origin;\r\n    this.computeValues([payload.distance, payload.angle]);\r\n    this.computeInitial();\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  touchMove(event) {\r\n    if (!this.state._active) return;\r\n    const payload = touchDistanceAngle(event, this.state._touchIds);\r\n    this.pinchMove(event, payload);\r\n  }\r\n\r\n  pointerMove(event) {\r\n    const _pointerEvents = this.state._pointerEvents;\r\n\r\n    if (_pointerEvents.has(event.pointerId)) {\r\n      _pointerEvents.set(event.pointerId, event);\r\n    }\r\n\r\n    if (!this.state._active) return;\r\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\r\n    this.pinchMove(event, payload);\r\n  }\r\n\r\n  pinchMove(event, payload) {\r\n    const state = this.state;\r\n    const prev_a = state._values[1];\r\n    const delta_a = payload.angle - prev_a;\r\n    let delta_turns = 0;\r\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\r\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\r\n    state.origin = payload.origin;\r\n    state.turns = delta_turns;\r\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  touchEnd(event) {\r\n    this.ctrl.setEventIds(event);\r\n    if (!this.state._active) return;\r\n\r\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\r\n      this.state._active = false;\r\n      this.compute(event);\r\n      this.emit();\r\n    }\r\n  }\r\n\r\n  pointerEnd(event) {\r\n    const state = this.state;\r\n    this.ctrl.setEventIds(event);\r\n\r\n    try {\r\n      event.target.releasePointerCapture(event.pointerId);\r\n    } catch (_unused) {}\r\n\r\n    if (state._pointerEvents.has(event.pointerId)) {\r\n      state._pointerEvents.delete(event.pointerId);\r\n    }\r\n\r\n    if (!state._active) return;\r\n\r\n    if (state._pointerEvents.size < 2) {\r\n      state._active = false;\r\n      this.compute(event);\r\n      this.emit();\r\n    }\r\n  }\r\n\r\n  gestureStart(event) {\r\n    if (event.cancelable) event.preventDefault();\r\n    const state = this.state;\r\n    if (state._active) return;\r\n    this.start(event);\r\n    this.computeValues([event.scale, event.rotation]);\r\n    state.origin = [event.clientX, event.clientY];\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  gestureMove(event) {\r\n    if (event.cancelable) event.preventDefault();\r\n    if (!this.state._active) return;\r\n    const state = this.state;\r\n    this.computeValues([event.scale, event.rotation]);\r\n    state.origin = [event.clientX, event.clientY];\r\n    const _previousMovement = state._movement;\r\n    state._movement = [event.scale - 1, event.rotation];\r\n    state._delta = V.sub(state._movement, _previousMovement);\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  gestureEnd(event) {\r\n    if (!this.state._active) return;\r\n    this.state._active = false;\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  wheel(event) {\r\n    const modifierKey = this.config.modifierKey;\r\n    if (modifierKey && !event[modifierKey]) return;\r\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\r\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\r\n  }\r\n\r\n  wheelStart(event) {\r\n    this.start(event);\r\n    this.wheelChange(event);\r\n  }\r\n\r\n  wheelChange(event) {\r\n    const isR3f = ('uv' in event);\r\n\r\n    if (!isR3f) {\r\n      if (event.cancelable) {\r\n        event.preventDefault();\r\n      }\r\n\r\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\r\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\r\n      }\r\n    }\r\n\r\n    const state = this.state;\r\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\r\n    V.addTo(state._movement, state._delta);\r\n    this.state.origin = [event.clientX, event.clientY];\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  wheelEnd() {\r\n    if (!this.state._active) return;\r\n    this.state._active = false;\r\n    this.compute();\r\n    this.emit();\r\n  }\r\n\r\n  bind(bindFunction) {\r\n    const device = this.config.device;\r\n\r\n    if (!!device) {\r\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\r\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\r\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\r\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\r\n    } else {\r\n      bindFunction('wheel', '', this.wheel.bind(this), {\r\n        passive: false\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\r\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\r\n  device(_v, _k, {\r\n    shared,\r\n    pointer: {\r\n      touch = false\r\n    } = {}\r\n  }) {\r\n    const sharedConfig = shared;\r\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\r\n    if (SUPPORT.touch && touch) return 'touch';\r\n\r\n    if (SUPPORT.touchscreen) {\r\n      if (SUPPORT.pointer) return 'pointer';\r\n      if (SUPPORT.touch) return 'touch';\r\n    }\r\n  },\r\n\r\n  bounds(_v, _k, {\r\n    scaleBounds = {},\r\n    angleBounds = {}\r\n  }) {\r\n    const _scaleBounds = state => {\r\n      const D = assignDefault(call(scaleBounds, state), {\r\n        min: -Infinity,\r\n        max: Infinity\r\n      });\r\n      return [D.min, D.max];\r\n    };\r\n\r\n    const _angleBounds = state => {\r\n      const A = assignDefault(call(angleBounds, state), {\r\n        min: -Infinity,\r\n        max: Infinity\r\n      });\r\n      return [A.min, A.max];\r\n    };\r\n\r\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\r\n    return state => [_scaleBounds(state), _angleBounds(state)];\r\n  },\r\n\r\n  threshold(value, _k, config) {\r\n    this.lockDirection = config.axis === 'lock';\r\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\r\n    return threshold;\r\n  },\r\n\r\n  modifierKey(value) {\r\n    if (value === undefined) return 'ctrlKey';\r\n    return value;\r\n  }\r\n\r\n});\r\n\r\nclass MoveEngine extends CoordinatesEngine {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    _defineProperty(this, \"ingKey\", 'moving');\r\n  }\r\n\r\n  move(event) {\r\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\r\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\r\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\r\n  }\r\n\r\n  moveStart(event) {\r\n    this.start(event);\r\n    this.computeValues(pointerValues(event));\r\n    this.compute(event);\r\n    this.computeInitial();\r\n    this.emit();\r\n  }\r\n\r\n  moveChange(event) {\r\n    if (!this.state._active) return;\r\n    const values = pointerValues(event);\r\n    const state = this.state;\r\n    state._delta = V.sub(values, state._values);\r\n    V.addTo(state._movement, state._delta);\r\n    this.computeValues(values);\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  moveEnd(event) {\r\n    if (!this.state._active) return;\r\n    this.state._active = false;\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  bind(bindFunction) {\r\n    bindFunction('pointer', 'change', this.move.bind(this));\r\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\r\n  }\r\n\r\n}\r\n\r\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\r\n  mouseOnly: (value = true) => value\r\n});\r\n\r\nclass ScrollEngine extends CoordinatesEngine {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    _defineProperty(this, \"ingKey\", 'scrolling');\r\n  }\r\n\r\n  scroll(event) {\r\n    if (!this.state._active) this.start(event);\r\n    this.scrollChange(event);\r\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\r\n  }\r\n\r\n  scrollChange(event) {\r\n    if (event.cancelable) event.preventDefault();\r\n    const state = this.state;\r\n    const values = scrollValues(event);\r\n    state._delta = V.sub(values, state._values);\r\n    V.addTo(state._movement, state._delta);\r\n    this.computeValues(values);\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  scrollEnd() {\r\n    if (!this.state._active) return;\r\n    this.state._active = false;\r\n    this.compute();\r\n    this.emit();\r\n  }\r\n\r\n  bind(bindFunction) {\r\n    bindFunction('scroll', '', this.scroll.bind(this));\r\n  }\r\n\r\n}\r\n\r\nconst scrollConfigResolver = coordinatesConfigResolver;\r\n\r\nclass WheelEngine extends CoordinatesEngine {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    _defineProperty(this, \"ingKey\", 'wheeling');\r\n  }\r\n\r\n  wheel(event) {\r\n    if (!this.state._active) this.start(event);\r\n    this.wheelChange(event);\r\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\r\n  }\r\n\r\n  wheelChange(event) {\r\n    const state = this.state;\r\n    state._delta = wheelValues(event);\r\n    V.addTo(state._movement, state._delta);\r\n    const [ox, oy] = state.overflow;\r\n    const [dx, dy] = state._delta;\r\n    const [dirx, diry] = state._direction;\r\n\r\n    if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\r\n      state._movement[0] = state._movementBound[0];\r\n    }\r\n\r\n    if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\r\n      state._movement[1] = state._movementBound[1];\r\n    }\r\n\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  wheelEnd() {\r\n    if (!this.state._active) return;\r\n    this.state._active = false;\r\n    this.compute();\r\n    this.emit();\r\n  }\r\n\r\n  bind(bindFunction) {\r\n    bindFunction('wheel', '', this.wheel.bind(this));\r\n  }\r\n\r\n}\r\n\r\nconst wheelConfigResolver = coordinatesConfigResolver;\r\n\r\nclass HoverEngine extends CoordinatesEngine {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    _defineProperty(this, \"ingKey\", 'hovering');\r\n  }\r\n\r\n  enter(event) {\r\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\r\n    this.start(event);\r\n    this.computeValues(pointerValues(event));\r\n    this.compute(event);\r\n    this.emit();\r\n  }\r\n\r\n  leave(event) {\r\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\r\n    const state = this.state;\r\n    if (!state._active) return;\r\n    state._active = false;\r\n    const values = pointerValues(event);\r\n    state._movement = state._delta = V.sub(values, state._values);\r\n    this.computeValues(values);\r\n    this.compute(event);\r\n    state.delta = state.movement;\r\n    this.emit();\r\n  }\r\n\r\n  bind(bindFunction) {\r\n    bindFunction('pointer', 'enter', this.enter.bind(this));\r\n    bindFunction('pointer', 'leave', this.leave.bind(this));\r\n  }\r\n\r\n}\r\n\r\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\r\n  mouseOnly: (value = true) => value\r\n});\r\n\r\nconst EngineMap = new Map();\r\nconst ConfigResolverMap = new Map();\r\nfunction registerAction(action) {\r\n  EngineMap.set(action.key, action.engine);\r\n  ConfigResolverMap.set(action.key, action.resolver);\r\n}\r\nconst dragAction = {\r\n  key: 'drag',\r\n  engine: DragEngine,\r\n  resolver: dragConfigResolver\r\n};\r\nconst hoverAction = {\r\n  key: 'hover',\r\n  engine: HoverEngine,\r\n  resolver: hoverConfigResolver\r\n};\r\nconst moveAction = {\r\n  key: 'move',\r\n  engine: MoveEngine,\r\n  resolver: moveConfigResolver\r\n};\r\nconst pinchAction = {\r\n  key: 'pinch',\r\n  engine: PinchEngine,\r\n  resolver: pinchConfigResolver\r\n};\r\nconst scrollAction = {\r\n  key: 'scroll',\r\n  engine: ScrollEngine,\r\n  resolver: scrollConfigResolver\r\n};\r\nconst wheelAction = {\r\n  key: 'wheel',\r\n  engine: WheelEngine,\r\n  resolver: wheelConfigResolver\r\n};\r\n\r\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}