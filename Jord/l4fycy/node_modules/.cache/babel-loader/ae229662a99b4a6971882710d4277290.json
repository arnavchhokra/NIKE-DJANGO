{"ast":null,"code":"import _toConsumableArray from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport * as React from 'react';\nimport { useThree } from '@react-three/fiber';\n\nfunction CycleRaycast(_ref) {\n  var onChanged = _ref.onChanged,\n      portal = _ref.portal,\n      _ref$preventDefault = _ref.preventDefault,\n      preventDefault = _ref$preventDefault === void 0 ? true : _ref$preventDefault,\n      _ref$scroll = _ref.scroll,\n      scroll = _ref$scroll === void 0 ? true : _ref$scroll,\n      _ref$keyCode = _ref.keyCode,\n      keyCode = _ref$keyCode === void 0 ? 9 : _ref$keyCode;\n  var cycle = React.useRef(0);\n  var setEvents = useThree(function (state) {\n    return state.setEvents;\n  });\n  var get = useThree(function (state) {\n    return state.get;\n  });\n  var gl = useThree(function (state) {\n    return state.gl;\n  });\n  React.useEffect(function () {\n    var _portal$current;\n\n    var hits = [];\n    var lastEvent = undefined;\n    var prev = get().events.filter;\n    var target = (_portal$current = portal == null ? void 0 : portal.current) !== null && _portal$current !== void 0 ? _portal$current : gl.domElement.parentNode; // Render custom status\n\n    var renderStatus = function renderStatus() {\n      return target && onChanged && onChanged(hits, Math.round(cycle.current) % hits.length);\n    }; // Overwrite the raycasters custom filter (this only exists in r3f)\n\n\n    setEvents({\n      filter: function filter(intersections, state) {\n        // Reset cycle when the intersections change\n        var clone = _toConsumableArray(intersections);\n\n        if (clone.length !== hits.length || !hits.every(function (hit) {\n          return clone.map(function (e) {\n            return e.object.uuid;\n          }).includes(hit.object.uuid);\n        })) {\n          cycle.current = 0;\n          hits = clone;\n          renderStatus();\n        } // Run custom filter if there is one\n\n\n        if (prev) clone = prev(clone, state); // Cycle through the actual raycast intersects\n\n        for (var i = 0; i < Math.round(cycle.current) % clone.length; i++) {\n          var first = clone.shift();\n          clone = [].concat(_toConsumableArray(clone), [first]);\n        }\n\n        return clone;\n      }\n    }); // Cycle, refresh events and render status\n\n    var refresh = function refresh(fn) {\n      var _get$events$handlers, _get$events$handlers2;\n\n      cycle.current = fn(cycle.current); // Cancel hovered elements and fake a pointer-move\n\n      (_get$events$handlers = get().events.handlers) == null ? void 0 : _get$events$handlers.onPointerCancel(undefined);\n      (_get$events$handlers2 = get().events.handlers) == null ? void 0 : _get$events$handlers2.onPointerMove(lastEvent);\n      renderStatus();\n    }; // Key events\n\n\n    var tabEvent = function tabEvent(event) {\n      if (event.keyCode || event.which === keyCode) {\n        if (preventDefault) event.preventDefault();\n        if (hits.length > 1) refresh(function (current) {\n          return current + 1;\n        });\n      }\n    }; // Wheel events\n\n\n    var wheelEvent = function wheelEvent(event) {\n      if (preventDefault) event.preventDefault();\n      var delta = 0;\n      if (!event) event = window.event;\n      if (event.wheelDelta) delta = event.wheelDelta / 120;else if (event.detail) delta = -event.detail / 3;\n      if (hits.length > 1) refresh(function (current) {\n        return Math.abs(current - delta);\n      });\n    }; // Catch last move event and position custom status\n\n\n    var moveEvent = function moveEvent(event) {\n      return lastEvent = event;\n    };\n\n    document.addEventListener('pointermove', moveEvent, {\n      passive: true\n    });\n    if (scroll) document.addEventListener('wheel', wheelEvent);\n    if (keyCode !== undefined) document.addEventListener('keydown', tabEvent);\n    return function () {\n      // Clean up\n      setEvents({\n        filter: prev\n      });\n      if (keyCode !== undefined) document.removeEventListener('keydown', tabEvent);\n      if (scroll) document.removeEventListener('wheel', wheelEvent);\n      document.removeEventListener('pointermove', moveEvent);\n    };\n  }, [gl, get, setEvents, preventDefault, scroll, keyCode]);\n  return null;\n}\n\nexport { CycleRaycast };","map":{"version":3,"names":["React","useThree","CycleRaycast","onChanged","portal","preventDefault","scroll","keyCode","cycle","useRef","setEvents","state","get","gl","useEffect","_portal$current","hits","lastEvent","undefined","prev","events","filter","target","current","domElement","parentNode","renderStatus","Math","round","length","intersections","clone","every","hit","map","e","object","uuid","includes","i","first","shift","refresh","fn","_get$events$handlers","_get$events$handlers2","handlers","onPointerCancel","onPointerMove","tabEvent","event","which","wheelEvent","delta","window","wheelDelta","detail","abs","moveEvent","document","addEventListener","passive","removeEventListener"],"sources":["D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@react-three/drei/web/CycleRaycast.js"],"sourcesContent":["import * as React from 'react';\r\nimport { useThree } from '@react-three/fiber';\r\n\r\nfunction CycleRaycast({\r\n  onChanged,\r\n  portal,\r\n  preventDefault = true,\r\n  scroll = true,\r\n  keyCode = 9\r\n}) {\r\n  const cycle = React.useRef(0);\r\n  const setEvents = useThree(state => state.setEvents);\r\n  const get = useThree(state => state.get);\r\n  const gl = useThree(state => state.gl);\r\n  React.useEffect(() => {\r\n    var _portal$current;\r\n\r\n    let hits = [];\r\n    let lastEvent = undefined;\r\n    const prev = get().events.filter;\r\n    const target = (_portal$current = portal == null ? void 0 : portal.current) !== null && _portal$current !== void 0 ? _portal$current : gl.domElement.parentNode; // Render custom status\r\n\r\n    const renderStatus = () => target && onChanged && onChanged(hits, Math.round(cycle.current) % hits.length); // Overwrite the raycasters custom filter (this only exists in r3f)\r\n\r\n\r\n    setEvents({\r\n      filter: (intersections, state) => {\r\n        // Reset cycle when the intersections change\r\n        let clone = [...intersections];\r\n\r\n        if (clone.length !== hits.length || !hits.every(hit => clone.map(e => e.object.uuid).includes(hit.object.uuid))) {\r\n          cycle.current = 0;\r\n          hits = clone;\r\n          renderStatus();\r\n        } // Run custom filter if there is one\r\n\r\n\r\n        if (prev) clone = prev(clone, state); // Cycle through the actual raycast intersects\r\n\r\n        for (let i = 0; i < Math.round(cycle.current) % clone.length; i++) {\r\n          const first = clone.shift();\r\n          clone = [...clone, first];\r\n        }\r\n\r\n        return clone;\r\n      }\r\n    }); // Cycle, refresh events and render status\r\n\r\n    const refresh = fn => {\r\n      var _get$events$handlers, _get$events$handlers2;\r\n\r\n      cycle.current = fn(cycle.current); // Cancel hovered elements and fake a pointer-move\r\n\r\n      (_get$events$handlers = get().events.handlers) == null ? void 0 : _get$events$handlers.onPointerCancel(undefined);\r\n      (_get$events$handlers2 = get().events.handlers) == null ? void 0 : _get$events$handlers2.onPointerMove(lastEvent);\r\n      renderStatus();\r\n    }; // Key events\r\n\r\n\r\n    const tabEvent = event => {\r\n      if (event.keyCode || event.which === keyCode) {\r\n        if (preventDefault) event.preventDefault();\r\n        if (hits.length > 1) refresh(current => current + 1);\r\n      }\r\n    }; // Wheel events\r\n\r\n\r\n    const wheelEvent = event => {\r\n      if (preventDefault) event.preventDefault();\r\n      let delta = 0;\r\n      if (!event) event = window.event;\r\n      if (event.wheelDelta) delta = event.wheelDelta / 120;else if (event.detail) delta = -event.detail / 3;\r\n      if (hits.length > 1) refresh(current => Math.abs(current - delta));\r\n    }; // Catch last move event and position custom status\r\n\r\n\r\n    const moveEvent = event => lastEvent = event;\r\n\r\n    document.addEventListener('pointermove', moveEvent, {\r\n      passive: true\r\n    });\r\n    if (scroll) document.addEventListener('wheel', wheelEvent);\r\n    if (keyCode !== undefined) document.addEventListener('keydown', tabEvent);\r\n    return () => {\r\n      // Clean up\r\n      setEvents({\r\n        filter: prev\r\n      });\r\n      if (keyCode !== undefined) document.removeEventListener('keydown', tabEvent);\r\n      if (scroll) document.removeEventListener('wheel', wheelEvent);\r\n      document.removeEventListener('pointermove', moveEvent);\r\n    };\r\n  }, [gl, get, setEvents, preventDefault, scroll, keyCode]);\r\n  return null;\r\n}\r\n\r\nexport { CycleRaycast };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}