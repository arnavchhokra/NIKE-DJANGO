{"ast":null,"code":"import _classCallCheck from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Pass } from './Pass.js';\n\nvar MaskPass = /*#__PURE__*/function (_Pass) {\n  _inherits(MaskPass, _Pass);\n\n  var _super = _createSuper(MaskPass);\n\n  function MaskPass(scene, camera) {\n    var _this;\n\n    _classCallCheck(this, MaskPass);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"scene\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"camera\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"inverse\", void 0);\n\n    _this.scene = scene;\n    _this.camera = camera;\n    _this.clear = true;\n    _this.needsSwap = false;\n    _this.inverse = false;\n    return _this;\n  }\n\n  _createClass(MaskPass, [{\n    key: \"render\",\n    value: function render(renderer, writeBuffer, readBuffer) {\n      var context = renderer.getContext();\n      var state = renderer.state; // don't update color or depth\n\n      state.buffers.color.setMask(false);\n      state.buffers.depth.setMask(false); // lock buffers\n\n      state.buffers.color.setLocked(true);\n      state.buffers.depth.setLocked(true); // set up stencil\n\n      var writeValue, clearValue;\n\n      if (this.inverse) {\n        writeValue = 0;\n        clearValue = 1;\n      } else {\n        writeValue = 1;\n        clearValue = 0;\n      }\n\n      state.buffers.stencil.setTest(true);\n      state.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n      state.buffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\n      state.buffers.stencil.setClear(clearValue);\n      state.buffers.stencil.setLocked(true); // draw into the stencil buffer\n\n      renderer.setRenderTarget(readBuffer);\n      if (this.clear) renderer.clear();\n      renderer.render(this.scene, this.camera);\n      renderer.setRenderTarget(writeBuffer);\n      if (this.clear) renderer.clear();\n      renderer.render(this.scene, this.camera); // unlock color and depth buffer for subsequent rendering\n\n      state.buffers.color.setLocked(false);\n      state.buffers.depth.setLocked(false); // only render where stencil is set to 1\n\n      state.buffers.stencil.setLocked(false);\n      state.buffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff); // draw if == 1\n\n      state.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n      state.buffers.stencil.setLocked(true);\n    }\n  }]);\n\n  return MaskPass;\n}(Pass);\n\nvar ClearMaskPass = /*#__PURE__*/function (_Pass2) {\n  _inherits(ClearMaskPass, _Pass2);\n\n  var _super2 = _createSuper(ClearMaskPass);\n\n  function ClearMaskPass() {\n    var _this2;\n\n    _classCallCheck(this, ClearMaskPass);\n\n    _this2 = _super2.call(this);\n    _this2.needsSwap = false;\n    return _this2;\n  }\n\n  _createClass(ClearMaskPass, [{\n    key: \"render\",\n    value: function render(renderer) {\n      renderer.state.buffers.stencil.setLocked(false);\n      renderer.state.buffers.stencil.setTest(false);\n    }\n  }]);\n\n  return ClearMaskPass;\n}(Pass);\n\nexport { ClearMaskPass, MaskPass };","map":{"version":3,"names":["_defineProperty","Pass","MaskPass","scene","camera","clear","needsSwap","inverse","renderer","writeBuffer","readBuffer","context","getContext","state","buffers","color","setMask","depth","setLocked","writeValue","clearValue","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","setRenderTarget","render","EQUAL","KEEP","ClearMaskPass"],"sources":["D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/three-stdlib/postprocessing/MaskPass.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\r\nimport { Pass } from './Pass.js';\r\n\r\nclass MaskPass extends Pass {\r\n  constructor(scene, camera) {\r\n    super();\r\n\r\n    _defineProperty(this, \"scene\", void 0);\r\n\r\n    _defineProperty(this, \"camera\", void 0);\r\n\r\n    _defineProperty(this, \"inverse\", void 0);\r\n\r\n    this.scene = scene;\r\n    this.camera = camera;\r\n    this.clear = true;\r\n    this.needsSwap = false;\r\n    this.inverse = false;\r\n  }\r\n\r\n  render(renderer, writeBuffer, readBuffer) {\r\n    const context = renderer.getContext();\r\n    const state = renderer.state; // don't update color or depth\r\n\r\n    state.buffers.color.setMask(false);\r\n    state.buffers.depth.setMask(false); // lock buffers\r\n\r\n    state.buffers.color.setLocked(true);\r\n    state.buffers.depth.setLocked(true); // set up stencil\r\n\r\n    let writeValue, clearValue;\r\n\r\n    if (this.inverse) {\r\n      writeValue = 0;\r\n      clearValue = 1;\r\n    } else {\r\n      writeValue = 1;\r\n      clearValue = 0;\r\n    }\r\n\r\n    state.buffers.stencil.setTest(true);\r\n    state.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\r\n    state.buffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\r\n    state.buffers.stencil.setClear(clearValue);\r\n    state.buffers.stencil.setLocked(true); // draw into the stencil buffer\r\n\r\n    renderer.setRenderTarget(readBuffer);\r\n    if (this.clear) renderer.clear();\r\n    renderer.render(this.scene, this.camera);\r\n    renderer.setRenderTarget(writeBuffer);\r\n    if (this.clear) renderer.clear();\r\n    renderer.render(this.scene, this.camera); // unlock color and depth buffer for subsequent rendering\r\n\r\n    state.buffers.color.setLocked(false);\r\n    state.buffers.depth.setLocked(false); // only render where stencil is set to 1\r\n\r\n    state.buffers.stencil.setLocked(false);\r\n    state.buffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff); // draw if == 1\r\n\r\n    state.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\r\n    state.buffers.stencil.setLocked(true);\r\n  }\r\n\r\n}\r\n\r\nclass ClearMaskPass extends Pass {\r\n  constructor() {\r\n    super();\r\n    this.needsSwap = false;\r\n  }\r\n\r\n  render(renderer) {\r\n    renderer.state.buffers.stencil.setLocked(false);\r\n    renderer.state.buffers.stencil.setTest(false);\r\n  }\r\n\r\n}\r\n\r\nexport { ClearMaskPass, MaskPass };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}