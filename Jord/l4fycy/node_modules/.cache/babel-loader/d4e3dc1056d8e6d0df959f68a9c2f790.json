{"ast":null,"code":"function LWO3Parser(IFFParser) {\n  this.IFF = IFFParser;\n}\n\nLWO3Parser.prototype = {\n  constructor: LWO3Parser,\n  parseBlock: function parseBlock() {\n    this.IFF.debugger.offset = this.IFF.reader.offset;\n    this.IFF.debugger.closeForms();\n    var blockID = this.IFF.reader.getIDTag();\n    var length = this.IFF.reader.getUint32(); // size of data in bytes\n\n    this.IFF.debugger.dataOffset = this.IFF.reader.offset;\n    this.IFF.debugger.length = length; // Data types may be found in either LWO2 OR LWO3 spec\n\n    switch (blockID) {\n      case 'FORM':\n        // form blocks may consist of sub -chunks or sub-forms\n        this.IFF.parseForm(length);\n        break;\n      // SKIPPED CHUNKS\n      // MISC skipped\n\n      case 'ICON': // Thumbnail Icon Image\n\n      case 'VMPA': // Vertex Map Parameter\n\n      case 'BBOX': // bounding box\n      // case 'VMMD':\n      // case 'VTYP':\n      // normal maps can be specified, normally on models imported from other applications. Currently ignored\n\n      case 'NORM': // ENVL FORM skipped\n\n      case 'PRE ':\n      case 'POST':\n      case 'KEY ':\n      case 'SPAN': // CLIP FORM skipped\n\n      case 'TIME':\n      case 'CLRS':\n      case 'CLRA':\n      case 'FILT':\n      case 'DITH':\n      case 'CONT':\n      case 'BRIT':\n      case 'SATR':\n      case 'HUE ':\n      case 'GAMM':\n      case 'NEGA':\n      case 'IFLT':\n      case 'PFLT': // Image Map Layer skipped\n\n      case 'PROJ':\n      case 'AXIS':\n      case 'AAST':\n      case 'PIXB':\n      case 'STCK': // Procedural Textures skipped\n\n      case 'VALU': // Gradient Textures skipped\n\n      case 'PNAM':\n      case 'INAM':\n      case 'GRST':\n      case 'GREN':\n      case 'GRPT':\n      case 'FKEY':\n      case 'IKEY': // Texture Mapping Form skipped\n\n      case 'CSYS': // Surface CHUNKs skipped\n\n      case 'OPAQ': // top level 'opacity' checkbox\n\n      case 'CMAP': // clip map\n      // Surface node CHUNKS skipped\n      // These mainly specify the node editor setup in LW\n\n      case 'NLOC':\n      case 'NZOM':\n      case 'NVER':\n      case 'NSRV':\n      case 'NCRD':\n      case 'NMOD':\n      case 'NSEL':\n      case 'NPRW':\n      case 'NPLA':\n      case 'VERS':\n      case 'ENUM':\n      case 'TAG ': // Car Material CHUNKS\n\n      case 'CGMD':\n      case 'CGTY':\n      case 'CGST':\n      case 'CGEN':\n      case 'CGTS':\n      case 'CGTE':\n      case 'OSMP':\n      case 'OMDE':\n      case 'OUTR':\n      case 'FLAG':\n      case 'TRNL':\n      case 'SHRP':\n      case 'RFOP':\n      case 'RSAN':\n      case 'TROP':\n      case 'RBLR':\n      case 'TBLR':\n      case 'CLRH':\n      case 'CLRF':\n      case 'ADTR':\n      case 'GLOW':\n      case 'LINE':\n      case 'ALPH':\n      case 'VCOL':\n      case 'ENAB':\n        this.IFF.debugger.skipped = true;\n        this.IFF.reader.skip(length);\n        break;\n      // Texture node chunks (not in spec)\n\n      case 'IPIX': // usePixelBlending\n\n      case 'IMIP': // useMipMaps\n\n      case 'IMOD': // imageBlendingMode\n\n      case 'AMOD': // unknown\n\n      case 'IINV': // imageInvertAlpha\n\n      case 'INCR': // imageInvertColor\n\n      case 'IAXS': // imageAxis ( for non-UV maps)\n\n      case 'IFOT': // imageFallofType\n\n      case 'ITIM': // timing for animated textures\n\n      case 'IWRL':\n      case 'IUTI':\n      case 'IINX':\n      case 'IINY':\n      case 'IINZ':\n      case 'IREF':\n        // possibly a VX for reused texture nodes\n        if (length === 4) this.IFF.currentNode[blockID] = this.IFF.reader.getInt32();else this.IFF.reader.skip(length);\n        break;\n\n      case 'OTAG':\n        this.IFF.parseObjectTag();\n        break;\n\n      case 'LAYR':\n        this.IFF.parseLayer(length);\n        break;\n\n      case 'PNTS':\n        this.IFF.parsePoints(length);\n        break;\n\n      case 'VMAP':\n        this.IFF.parseVertexMapping(length);\n        break;\n\n      case 'POLS':\n        this.IFF.parsePolygonList(length);\n        break;\n\n      case 'TAGS':\n        this.IFF.parseTagStrings(length);\n        break;\n\n      case 'PTAG':\n        this.IFF.parsePolygonTagMapping(length);\n        break;\n\n      case 'VMAD':\n        this.IFF.parseVertexMapping(length, true);\n        break;\n      // Misc CHUNKS\n\n      case 'DESC':\n        // Description Line\n        this.IFF.currentForm.description = this.IFF.reader.getString();\n        break;\n\n      case 'TEXT':\n      case 'CMNT':\n      case 'NCOM':\n        this.IFF.currentForm.comment = this.IFF.reader.getString();\n        break;\n      // Envelope Form\n\n      case 'NAME':\n        this.IFF.currentForm.channelName = this.IFF.reader.getString();\n        break;\n      // Image Map Layer\n\n      case 'WRAP':\n        this.IFF.currentForm.wrap = {\n          w: this.IFF.reader.getUint16(),\n          h: this.IFF.reader.getUint16()\n        };\n        break;\n\n      case 'IMAG':\n        var index = this.IFF.reader.getVariableLengthIndex();\n        this.IFF.currentForm.imageIndex = index;\n        break;\n      // Texture Mapping Form\n\n      case 'OREF':\n        this.IFF.currentForm.referenceObject = this.IFF.reader.getString();\n        break;\n\n      case 'ROID':\n        this.IFF.currentForm.referenceObjectID = this.IFF.reader.getUint32();\n        break;\n      // Surface Blocks\n\n      case 'SSHN':\n        this.IFF.currentSurface.surfaceShaderName = this.IFF.reader.getString();\n        break;\n\n      case 'AOVN':\n        this.IFF.currentSurface.surfaceCustomAOVName = this.IFF.reader.getString();\n        break;\n      // Nodal Blocks\n\n      case 'NSTA':\n        this.IFF.currentForm.disabled = this.IFF.reader.getUint16();\n        break;\n\n      case 'NRNM':\n        this.IFF.currentForm.realName = this.IFF.reader.getString();\n        break;\n\n      case 'NNME':\n        this.IFF.currentForm.refName = this.IFF.reader.getString();\n        this.IFF.currentSurface.nodes[this.IFF.currentForm.refName] = this.IFF.currentForm;\n        break;\n      // Nodal Blocks : connections\n\n      case 'INME':\n        if (!this.IFF.currentForm.nodeName) this.IFF.currentForm.nodeName = [];\n        this.IFF.currentForm.nodeName.push(this.IFF.reader.getString());\n        break;\n\n      case 'IINN':\n        if (!this.IFF.currentForm.inputNodeName) this.IFF.currentForm.inputNodeName = [];\n        this.IFF.currentForm.inputNodeName.push(this.IFF.reader.getString());\n        break;\n\n      case 'IINM':\n        if (!this.IFF.currentForm.inputName) this.IFF.currentForm.inputName = [];\n        this.IFF.currentForm.inputName.push(this.IFF.reader.getString());\n        break;\n\n      case 'IONM':\n        if (!this.IFF.currentForm.inputOutputName) this.IFF.currentForm.inputOutputName = [];\n        this.IFF.currentForm.inputOutputName.push(this.IFF.reader.getString());\n        break;\n\n      case 'FNAM':\n        this.IFF.currentForm.fileName = this.IFF.reader.getString();\n        break;\n\n      case 'CHAN':\n        // NOTE: ENVL Forms may also have CHAN chunk, however ENVL is currently ignored\n        if (length === 4) this.IFF.currentForm.textureChannel = this.IFF.reader.getIDTag();else this.IFF.reader.skip(length);\n        break;\n      // LWO2 Spec chunks: these are needed since the SURF FORMs are often in LWO2 format\n\n      case 'SMAN':\n        var maxSmoothingAngle = this.IFF.reader.getFloat32();\n        this.IFF.currentSurface.attributes.smooth = maxSmoothingAngle < 0 ? false : true;\n        break;\n      // LWO2: Basic Surface Parameters\n\n      case 'COLR':\n        this.IFF.currentSurface.attributes.Color = {\n          value: this.IFF.reader.getFloat32Array(3)\n        };\n        this.IFF.reader.skip(2); // VX: envelope\n\n        break;\n\n      case 'LUMI':\n        this.IFF.currentSurface.attributes.Luminosity = {\n          value: this.IFF.reader.getFloat32()\n        };\n        this.IFF.reader.skip(2);\n        break;\n\n      case 'SPEC':\n        this.IFF.currentSurface.attributes.Specular = {\n          value: this.IFF.reader.getFloat32()\n        };\n        this.IFF.reader.skip(2);\n        break;\n\n      case 'DIFF':\n        this.IFF.currentSurface.attributes.Diffuse = {\n          value: this.IFF.reader.getFloat32()\n        };\n        this.IFF.reader.skip(2);\n        break;\n\n      case 'REFL':\n        this.IFF.currentSurface.attributes.Reflection = {\n          value: this.IFF.reader.getFloat32()\n        };\n        this.IFF.reader.skip(2);\n        break;\n\n      case 'GLOS':\n        this.IFF.currentSurface.attributes.Glossiness = {\n          value: this.IFF.reader.getFloat32()\n        };\n        this.IFF.reader.skip(2);\n        break;\n\n      case 'TRAN':\n        this.IFF.currentSurface.attributes.opacity = this.IFF.reader.getFloat32();\n        this.IFF.reader.skip(2);\n        break;\n\n      case 'BUMP':\n        this.IFF.currentSurface.attributes.bumpStrength = this.IFF.reader.getFloat32();\n        this.IFF.reader.skip(2);\n        break;\n\n      case 'SIDE':\n        this.IFF.currentSurface.attributes.side = this.IFF.reader.getUint16();\n        break;\n\n      case 'RIMG':\n        this.IFF.currentSurface.attributes.reflectionMap = this.IFF.reader.getVariableLengthIndex();\n        break;\n\n      case 'RIND':\n        this.IFF.currentSurface.attributes.refractiveIndex = this.IFF.reader.getFloat32();\n        this.IFF.reader.skip(2);\n        break;\n\n      case 'TIMG':\n        this.IFF.currentSurface.attributes.refractionMap = this.IFF.reader.getVariableLengthIndex();\n        break;\n\n      case 'IMAP':\n        this.IFF.currentSurface.attributes.imageMapIndex = this.IFF.reader.getUint32();\n        break;\n\n      case 'IUVI':\n        // uv channel name\n        this.IFF.currentNode.UVChannel = this.IFF.reader.getString(length);\n        break;\n\n      case 'IUTL':\n        // widthWrappingMode: 0 = Reset, 1 = Repeat, 2 = Mirror, 3 = Edge\n        this.IFF.currentNode.widthWrappingMode = this.IFF.reader.getUint32();\n        break;\n\n      case 'IVTL':\n        // heightWrappingMode\n        this.IFF.currentNode.heightWrappingMode = this.IFF.reader.getUint32();\n        break;\n\n      default:\n        this.IFF.parseUnknownCHUNK(blockID, length);\n    }\n\n    if (blockID != 'FORM') {\n      this.IFF.debugger.node = 1;\n      this.IFF.debugger.nodeID = blockID;\n      this.IFF.debugger.log();\n    }\n\n    if (this.IFF.reader.offset >= this.IFF.currentFormEnd) {\n      this.IFF.currentForm = this.IFF.parentForm;\n    }\n  }\n};\nexport { LWO3Parser };","map":{"version":3,"names":["LWO3Parser","IFFParser","IFF","prototype","constructor","parseBlock","debugger","offset","reader","closeForms","blockID","getIDTag","length","getUint32","dataOffset","parseForm","skipped","skip","currentNode","getInt32","parseObjectTag","parseLayer","parsePoints","parseVertexMapping","parsePolygonList","parseTagStrings","parsePolygonTagMapping","currentForm","description","getString","comment","channelName","wrap","w","getUint16","h","index","getVariableLengthIndex","imageIndex","referenceObject","referenceObjectID","currentSurface","surfaceShaderName","surfaceCustomAOVName","disabled","realName","refName","nodes","nodeName","push","inputNodeName","inputName","inputOutputName","fileName","textureChannel","maxSmoothingAngle","getFloat32","attributes","smooth","Color","value","getFloat32Array","Luminosity","Specular","Diffuse","Reflection","Glossiness","opacity","bumpStrength","side","reflectionMap","refractiveIndex","refractionMap","imageMapIndex","UVChannel","widthWrappingMode","heightWrappingMode","parseUnknownCHUNK","node","nodeID","log","currentFormEnd","parentForm"],"sources":["D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/three-stdlib/loaders/lwo/LWO3Parser.js"],"sourcesContent":["function LWO3Parser(IFFParser) {\r\n  this.IFF = IFFParser;\r\n}\r\n\r\nLWO3Parser.prototype = {\r\n  constructor: LWO3Parser,\r\n  parseBlock: function () {\r\n    this.IFF.debugger.offset = this.IFF.reader.offset;\r\n    this.IFF.debugger.closeForms();\r\n    var blockID = this.IFF.reader.getIDTag();\r\n    var length = this.IFF.reader.getUint32(); // size of data in bytes\r\n\r\n    this.IFF.debugger.dataOffset = this.IFF.reader.offset;\r\n    this.IFF.debugger.length = length; // Data types may be found in either LWO2 OR LWO3 spec\r\n\r\n    switch (blockID) {\r\n      case 'FORM':\r\n        // form blocks may consist of sub -chunks or sub-forms\r\n        this.IFF.parseForm(length);\r\n        break;\r\n      // SKIPPED CHUNKS\r\n      // MISC skipped\r\n\r\n      case 'ICON': // Thumbnail Icon Image\r\n\r\n      case 'VMPA': // Vertex Map Parameter\r\n\r\n      case 'BBOX': // bounding box\r\n      // case 'VMMD':\r\n      // case 'VTYP':\r\n      // normal maps can be specified, normally on models imported from other applications. Currently ignored\r\n\r\n      case 'NORM': // ENVL FORM skipped\r\n\r\n      case 'PRE ':\r\n      case 'POST':\r\n      case 'KEY ':\r\n      case 'SPAN': // CLIP FORM skipped\r\n\r\n      case 'TIME':\r\n      case 'CLRS':\r\n      case 'CLRA':\r\n      case 'FILT':\r\n      case 'DITH':\r\n      case 'CONT':\r\n      case 'BRIT':\r\n      case 'SATR':\r\n      case 'HUE ':\r\n      case 'GAMM':\r\n      case 'NEGA':\r\n      case 'IFLT':\r\n      case 'PFLT': // Image Map Layer skipped\r\n\r\n      case 'PROJ':\r\n      case 'AXIS':\r\n      case 'AAST':\r\n      case 'PIXB':\r\n      case 'STCK': // Procedural Textures skipped\r\n\r\n      case 'VALU': // Gradient Textures skipped\r\n\r\n      case 'PNAM':\r\n      case 'INAM':\r\n      case 'GRST':\r\n      case 'GREN':\r\n      case 'GRPT':\r\n      case 'FKEY':\r\n      case 'IKEY': // Texture Mapping Form skipped\r\n\r\n      case 'CSYS': // Surface CHUNKs skipped\r\n\r\n      case 'OPAQ': // top level 'opacity' checkbox\r\n\r\n      case 'CMAP': // clip map\r\n      // Surface node CHUNKS skipped\r\n      // These mainly specify the node editor setup in LW\r\n\r\n      case 'NLOC':\r\n      case 'NZOM':\r\n      case 'NVER':\r\n      case 'NSRV':\r\n      case 'NCRD':\r\n      case 'NMOD':\r\n      case 'NSEL':\r\n      case 'NPRW':\r\n      case 'NPLA':\r\n      case 'VERS':\r\n      case 'ENUM':\r\n      case 'TAG ': // Car Material CHUNKS\r\n\r\n      case 'CGMD':\r\n      case 'CGTY':\r\n      case 'CGST':\r\n      case 'CGEN':\r\n      case 'CGTS':\r\n      case 'CGTE':\r\n      case 'OSMP':\r\n      case 'OMDE':\r\n      case 'OUTR':\r\n      case 'FLAG':\r\n      case 'TRNL':\r\n      case 'SHRP':\r\n      case 'RFOP':\r\n      case 'RSAN':\r\n      case 'TROP':\r\n      case 'RBLR':\r\n      case 'TBLR':\r\n      case 'CLRH':\r\n      case 'CLRF':\r\n      case 'ADTR':\r\n      case 'GLOW':\r\n      case 'LINE':\r\n      case 'ALPH':\r\n      case 'VCOL':\r\n      case 'ENAB':\r\n        this.IFF.debugger.skipped = true;\r\n        this.IFF.reader.skip(length);\r\n        break;\r\n      // Texture node chunks (not in spec)\r\n\r\n      case 'IPIX': // usePixelBlending\r\n\r\n      case 'IMIP': // useMipMaps\r\n\r\n      case 'IMOD': // imageBlendingMode\r\n\r\n      case 'AMOD': // unknown\r\n\r\n      case 'IINV': // imageInvertAlpha\r\n\r\n      case 'INCR': // imageInvertColor\r\n\r\n      case 'IAXS': // imageAxis ( for non-UV maps)\r\n\r\n      case 'IFOT': // imageFallofType\r\n\r\n      case 'ITIM': // timing for animated textures\r\n\r\n      case 'IWRL':\r\n      case 'IUTI':\r\n      case 'IINX':\r\n      case 'IINY':\r\n      case 'IINZ':\r\n      case 'IREF':\r\n        // possibly a VX for reused texture nodes\r\n        if (length === 4) this.IFF.currentNode[blockID] = this.IFF.reader.getInt32();else this.IFF.reader.skip(length);\r\n        break;\r\n\r\n      case 'OTAG':\r\n        this.IFF.parseObjectTag();\r\n        break;\r\n\r\n      case 'LAYR':\r\n        this.IFF.parseLayer(length);\r\n        break;\r\n\r\n      case 'PNTS':\r\n        this.IFF.parsePoints(length);\r\n        break;\r\n\r\n      case 'VMAP':\r\n        this.IFF.parseVertexMapping(length);\r\n        break;\r\n\r\n      case 'POLS':\r\n        this.IFF.parsePolygonList(length);\r\n        break;\r\n\r\n      case 'TAGS':\r\n        this.IFF.parseTagStrings(length);\r\n        break;\r\n\r\n      case 'PTAG':\r\n        this.IFF.parsePolygonTagMapping(length);\r\n        break;\r\n\r\n      case 'VMAD':\r\n        this.IFF.parseVertexMapping(length, true);\r\n        break;\r\n      // Misc CHUNKS\r\n\r\n      case 'DESC':\r\n        // Description Line\r\n        this.IFF.currentForm.description = this.IFF.reader.getString();\r\n        break;\r\n\r\n      case 'TEXT':\r\n      case 'CMNT':\r\n      case 'NCOM':\r\n        this.IFF.currentForm.comment = this.IFF.reader.getString();\r\n        break;\r\n      // Envelope Form\r\n\r\n      case 'NAME':\r\n        this.IFF.currentForm.channelName = this.IFF.reader.getString();\r\n        break;\r\n      // Image Map Layer\r\n\r\n      case 'WRAP':\r\n        this.IFF.currentForm.wrap = {\r\n          w: this.IFF.reader.getUint16(),\r\n          h: this.IFF.reader.getUint16()\r\n        };\r\n        break;\r\n\r\n      case 'IMAG':\r\n        var index = this.IFF.reader.getVariableLengthIndex();\r\n        this.IFF.currentForm.imageIndex = index;\r\n        break;\r\n      // Texture Mapping Form\r\n\r\n      case 'OREF':\r\n        this.IFF.currentForm.referenceObject = this.IFF.reader.getString();\r\n        break;\r\n\r\n      case 'ROID':\r\n        this.IFF.currentForm.referenceObjectID = this.IFF.reader.getUint32();\r\n        break;\r\n      // Surface Blocks\r\n\r\n      case 'SSHN':\r\n        this.IFF.currentSurface.surfaceShaderName = this.IFF.reader.getString();\r\n        break;\r\n\r\n      case 'AOVN':\r\n        this.IFF.currentSurface.surfaceCustomAOVName = this.IFF.reader.getString();\r\n        break;\r\n      // Nodal Blocks\r\n\r\n      case 'NSTA':\r\n        this.IFF.currentForm.disabled = this.IFF.reader.getUint16();\r\n        break;\r\n\r\n      case 'NRNM':\r\n        this.IFF.currentForm.realName = this.IFF.reader.getString();\r\n        break;\r\n\r\n      case 'NNME':\r\n        this.IFF.currentForm.refName = this.IFF.reader.getString();\r\n        this.IFF.currentSurface.nodes[this.IFF.currentForm.refName] = this.IFF.currentForm;\r\n        break;\r\n      // Nodal Blocks : connections\r\n\r\n      case 'INME':\r\n        if (!this.IFF.currentForm.nodeName) this.IFF.currentForm.nodeName = [];\r\n        this.IFF.currentForm.nodeName.push(this.IFF.reader.getString());\r\n        break;\r\n\r\n      case 'IINN':\r\n        if (!this.IFF.currentForm.inputNodeName) this.IFF.currentForm.inputNodeName = [];\r\n        this.IFF.currentForm.inputNodeName.push(this.IFF.reader.getString());\r\n        break;\r\n\r\n      case 'IINM':\r\n        if (!this.IFF.currentForm.inputName) this.IFF.currentForm.inputName = [];\r\n        this.IFF.currentForm.inputName.push(this.IFF.reader.getString());\r\n        break;\r\n\r\n      case 'IONM':\r\n        if (!this.IFF.currentForm.inputOutputName) this.IFF.currentForm.inputOutputName = [];\r\n        this.IFF.currentForm.inputOutputName.push(this.IFF.reader.getString());\r\n        break;\r\n\r\n      case 'FNAM':\r\n        this.IFF.currentForm.fileName = this.IFF.reader.getString();\r\n        break;\r\n\r\n      case 'CHAN':\r\n        // NOTE: ENVL Forms may also have CHAN chunk, however ENVL is currently ignored\r\n        if (length === 4) this.IFF.currentForm.textureChannel = this.IFF.reader.getIDTag();else this.IFF.reader.skip(length);\r\n        break;\r\n      // LWO2 Spec chunks: these are needed since the SURF FORMs are often in LWO2 format\r\n\r\n      case 'SMAN':\r\n        var maxSmoothingAngle = this.IFF.reader.getFloat32();\r\n        this.IFF.currentSurface.attributes.smooth = maxSmoothingAngle < 0 ? false : true;\r\n        break;\r\n      // LWO2: Basic Surface Parameters\r\n\r\n      case 'COLR':\r\n        this.IFF.currentSurface.attributes.Color = {\r\n          value: this.IFF.reader.getFloat32Array(3)\r\n        };\r\n        this.IFF.reader.skip(2); // VX: envelope\r\n\r\n        break;\r\n\r\n      case 'LUMI':\r\n        this.IFF.currentSurface.attributes.Luminosity = {\r\n          value: this.IFF.reader.getFloat32()\r\n        };\r\n        this.IFF.reader.skip(2);\r\n        break;\r\n\r\n      case 'SPEC':\r\n        this.IFF.currentSurface.attributes.Specular = {\r\n          value: this.IFF.reader.getFloat32()\r\n        };\r\n        this.IFF.reader.skip(2);\r\n        break;\r\n\r\n      case 'DIFF':\r\n        this.IFF.currentSurface.attributes.Diffuse = {\r\n          value: this.IFF.reader.getFloat32()\r\n        };\r\n        this.IFF.reader.skip(2);\r\n        break;\r\n\r\n      case 'REFL':\r\n        this.IFF.currentSurface.attributes.Reflection = {\r\n          value: this.IFF.reader.getFloat32()\r\n        };\r\n        this.IFF.reader.skip(2);\r\n        break;\r\n\r\n      case 'GLOS':\r\n        this.IFF.currentSurface.attributes.Glossiness = {\r\n          value: this.IFF.reader.getFloat32()\r\n        };\r\n        this.IFF.reader.skip(2);\r\n        break;\r\n\r\n      case 'TRAN':\r\n        this.IFF.currentSurface.attributes.opacity = this.IFF.reader.getFloat32();\r\n        this.IFF.reader.skip(2);\r\n        break;\r\n\r\n      case 'BUMP':\r\n        this.IFF.currentSurface.attributes.bumpStrength = this.IFF.reader.getFloat32();\r\n        this.IFF.reader.skip(2);\r\n        break;\r\n\r\n      case 'SIDE':\r\n        this.IFF.currentSurface.attributes.side = this.IFF.reader.getUint16();\r\n        break;\r\n\r\n      case 'RIMG':\r\n        this.IFF.currentSurface.attributes.reflectionMap = this.IFF.reader.getVariableLengthIndex();\r\n        break;\r\n\r\n      case 'RIND':\r\n        this.IFF.currentSurface.attributes.refractiveIndex = this.IFF.reader.getFloat32();\r\n        this.IFF.reader.skip(2);\r\n        break;\r\n\r\n      case 'TIMG':\r\n        this.IFF.currentSurface.attributes.refractionMap = this.IFF.reader.getVariableLengthIndex();\r\n        break;\r\n\r\n      case 'IMAP':\r\n        this.IFF.currentSurface.attributes.imageMapIndex = this.IFF.reader.getUint32();\r\n        break;\r\n\r\n      case 'IUVI':\r\n        // uv channel name\r\n        this.IFF.currentNode.UVChannel = this.IFF.reader.getString(length);\r\n        break;\r\n\r\n      case 'IUTL':\r\n        // widthWrappingMode: 0 = Reset, 1 = Repeat, 2 = Mirror, 3 = Edge\r\n        this.IFF.currentNode.widthWrappingMode = this.IFF.reader.getUint32();\r\n        break;\r\n\r\n      case 'IVTL':\r\n        // heightWrappingMode\r\n        this.IFF.currentNode.heightWrappingMode = this.IFF.reader.getUint32();\r\n        break;\r\n\r\n      default:\r\n        this.IFF.parseUnknownCHUNK(blockID, length);\r\n    }\r\n\r\n    if (blockID != 'FORM') {\r\n      this.IFF.debugger.node = 1;\r\n      this.IFF.debugger.nodeID = blockID;\r\n      this.IFF.debugger.log();\r\n    }\r\n\r\n    if (this.IFF.reader.offset >= this.IFF.currentFormEnd) {\r\n      this.IFF.currentForm = this.IFF.parentForm;\r\n    }\r\n  }\r\n};\r\n\r\nexport { LWO3Parser };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}