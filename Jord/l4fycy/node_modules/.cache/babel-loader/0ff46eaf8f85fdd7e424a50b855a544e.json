{"ast":null,"code":"import _classCallCheck from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/Arnav/Downloads/l4fycy/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node from '../core/Node.js';\nimport Object3DNode from '../accessors/Object3DNode.js';\nimport PositionNode from '../accessors/PositionNode.js';\nimport UniformNode from '../core/UniformNode.js';\nimport OperatorNode from '../math/OperatorNode.js';\nimport MathNode from '../math/MathNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { getDistanceAttenuation } from '../functions/BSDFs.js';\nimport { Color } from 'three';\n\nvar LightNode = /*#__PURE__*/function (_Node) {\n  _inherits(LightNode, _Node);\n\n  var _super = _createSuper(LightNode);\n\n  function LightNode() {\n    var _this;\n\n    var light = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, LightNode);\n\n    _this = _super.call(this, 'vec3');\n    _this.updateType = NodeUpdateType.Object;\n    _this.light = light;\n    _this._colorNode = new UniformNode(new Color());\n    _this._lightCutoffDistanceNode = new UniformNode(0);\n    _this._lightDecayExponentNode = new UniformNode(0);\n    return _this;\n  }\n\n  _createClass(LightNode, [{\n    key: \"getHash\",\n    value: function getHash() {\n      return this.light.uuid;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this._colorNode.value.copy(this.light.color).multiplyScalar(this.light.intensity);\n\n      this._lightCutoffDistanceNode.value = this.light.distance;\n      this._lightDecayExponentNode.value = this.light.decay;\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var lightPositionView = new Object3DNode(Object3DNode.VIEW_POSITION);\n      var positionView = new PositionNode(PositionNode.VIEW);\n      var lVector = new OperatorNode('-', lightPositionView, positionView);\n      var lightDirection = new MathNode(MathNode.NORMALIZE, lVector);\n      var lightDistance = new MathNode(MathNode.LENGTH, lVector);\n      var lightAttenuation = getDistanceAttenuation({\n        lightDistance: lightDistance,\n        cutoffDistance: this._lightCutoffDistanceNode,\n        decayExponent: this._lightDecayExponentNode\n      });\n      var lightColor = new OperatorNode('*', this._colorNode, lightAttenuation);\n      lightPositionView.object3d = this.light;\n      var lightingModelFunction = builder.context.lightingModel;\n\n      if (lightingModelFunction !== undefined) {\n        var directDiffuse = builder.context.directDiffuse;\n        var directSpecular = builder.context.directSpecular;\n        lightingModelFunction({\n          lightDirection: lightDirection,\n          lightColor: lightColor,\n          directDiffuse: directDiffuse,\n          directSpecular: directSpecular\n        }, builder);\n      }\n    }\n  }]);\n\n  return LightNode;\n}(Node);\n\nexport default LightNode;","map":{"version":3,"names":["Node","Object3DNode","PositionNode","UniformNode","OperatorNode","MathNode","NodeUpdateType","getDistanceAttenuation","Color","LightNode","light","updateType","Object","_colorNode","_lightCutoffDistanceNode","_lightDecayExponentNode","uuid","value","copy","color","multiplyScalar","intensity","distance","decay","builder","lightPositionView","VIEW_POSITION","positionView","VIEW","lVector","lightDirection","NORMALIZE","lightDistance","LENGTH","lightAttenuation","cutoffDistance","decayExponent","lightColor","object3d","lightingModelFunction","context","lightingModel","undefined","directDiffuse","directSpecular"],"sources":["C:/Users/Arnav/Downloads/l4fycy/node_modules/three-stdlib/nodes/lights/LightNode.js"],"sourcesContent":["import Node from '../core/Node.js';\nimport Object3DNode from '../accessors/Object3DNode.js';\nimport PositionNode from '../accessors/PositionNode.js';\nimport UniformNode from '../core/UniformNode.js';\nimport OperatorNode from '../math/OperatorNode.js';\nimport MathNode from '../math/MathNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { getDistanceAttenuation } from '../functions/BSDFs.js';\nimport { Color } from 'three';\n\nclass LightNode extends Node {\n  constructor(light = null) {\n    super('vec3');\n    this.updateType = NodeUpdateType.Object;\n    this.light = light;\n    this._colorNode = new UniformNode(new Color());\n    this._lightCutoffDistanceNode = new UniformNode(0);\n    this._lightDecayExponentNode = new UniformNode(0);\n  }\n\n  getHash() {\n    return this.light.uuid;\n  }\n\n  update() {\n    this._colorNode.value.copy(this.light.color).multiplyScalar(this.light.intensity);\n\n    this._lightCutoffDistanceNode.value = this.light.distance;\n    this._lightDecayExponentNode.value = this.light.decay;\n  }\n\n  generate(builder) {\n    const lightPositionView = new Object3DNode(Object3DNode.VIEW_POSITION);\n    const positionView = new PositionNode(PositionNode.VIEW);\n    const lVector = new OperatorNode('-', lightPositionView, positionView);\n    const lightDirection = new MathNode(MathNode.NORMALIZE, lVector);\n    const lightDistance = new MathNode(MathNode.LENGTH, lVector);\n    const lightAttenuation = getDistanceAttenuation({\n      lightDistance,\n      cutoffDistance: this._lightCutoffDistanceNode,\n      decayExponent: this._lightDecayExponentNode\n    });\n    const lightColor = new OperatorNode('*', this._colorNode, lightAttenuation);\n    lightPositionView.object3d = this.light;\n    const lightingModelFunction = builder.context.lightingModel;\n\n    if (lightingModelFunction !== undefined) {\n      const directDiffuse = builder.context.directDiffuse;\n      const directSpecular = builder.context.directSpecular;\n      lightingModelFunction({\n        lightDirection,\n        lightColor,\n        directDiffuse,\n        directSpecular\n      }, builder);\n    }\n  }\n\n}\n\nexport default LightNode;\n"],"mappings":";;;;AAAA,OAAOA,IAAP,MAAiB,iBAAjB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,SAASC,cAAT,QAA+B,sBAA/B;AACA,SAASC,sBAAT,QAAuC,uBAAvC;AACA,SAASC,KAAT,QAAsB,OAAtB;;IAEMC,S;;;;;EACJ,qBAA0B;IAAA;;IAAA,IAAdC,KAAc,uEAAN,IAAM;;IAAA;;IACxB,0BAAM,MAAN;IACA,MAAKC,UAAL,GAAkBL,cAAc,CAACM,MAAjC;IACA,MAAKF,KAAL,GAAaA,KAAb;IACA,MAAKG,UAAL,GAAkB,IAAIV,WAAJ,CAAgB,IAAIK,KAAJ,EAAhB,CAAlB;IACA,MAAKM,wBAAL,GAAgC,IAAIX,WAAJ,CAAgB,CAAhB,CAAhC;IACA,MAAKY,uBAAL,GAA+B,IAAIZ,WAAJ,CAAgB,CAAhB,CAA/B;IANwB;EAOzB;;;;WAED,mBAAU;MACR,OAAO,KAAKO,KAAL,CAAWM,IAAlB;IACD;;;WAED,kBAAS;MACP,KAAKH,UAAL,CAAgBI,KAAhB,CAAsBC,IAAtB,CAA2B,KAAKR,KAAL,CAAWS,KAAtC,EAA6CC,cAA7C,CAA4D,KAAKV,KAAL,CAAWW,SAAvE;;MAEA,KAAKP,wBAAL,CAA8BG,KAA9B,GAAsC,KAAKP,KAAL,CAAWY,QAAjD;MACA,KAAKP,uBAAL,CAA6BE,KAA7B,GAAqC,KAAKP,KAAL,CAAWa,KAAhD;IACD;;;WAED,kBAASC,OAAT,EAAkB;MAChB,IAAMC,iBAAiB,GAAG,IAAIxB,YAAJ,CAAiBA,YAAY,CAACyB,aAA9B,CAA1B;MACA,IAAMC,YAAY,GAAG,IAAIzB,YAAJ,CAAiBA,YAAY,CAAC0B,IAA9B,CAArB;MACA,IAAMC,OAAO,GAAG,IAAIzB,YAAJ,CAAiB,GAAjB,EAAsBqB,iBAAtB,EAAyCE,YAAzC,CAAhB;MACA,IAAMG,cAAc,GAAG,IAAIzB,QAAJ,CAAaA,QAAQ,CAAC0B,SAAtB,EAAiCF,OAAjC,CAAvB;MACA,IAAMG,aAAa,GAAG,IAAI3B,QAAJ,CAAaA,QAAQ,CAAC4B,MAAtB,EAA8BJ,OAA9B,CAAtB;MACA,IAAMK,gBAAgB,GAAG3B,sBAAsB,CAAC;QAC9CyB,aAAa,EAAbA,aAD8C;QAE9CG,cAAc,EAAE,KAAKrB,wBAFyB;QAG9CsB,aAAa,EAAE,KAAKrB;MAH0B,CAAD,CAA/C;MAKA,IAAMsB,UAAU,GAAG,IAAIjC,YAAJ,CAAiB,GAAjB,EAAsB,KAAKS,UAA3B,EAAuCqB,gBAAvC,CAAnB;MACAT,iBAAiB,CAACa,QAAlB,GAA6B,KAAK5B,KAAlC;MACA,IAAM6B,qBAAqB,GAAGf,OAAO,CAACgB,OAAR,CAAgBC,aAA9C;;MAEA,IAAIF,qBAAqB,KAAKG,SAA9B,EAAyC;QACvC,IAAMC,aAAa,GAAGnB,OAAO,CAACgB,OAAR,CAAgBG,aAAtC;QACA,IAAMC,cAAc,GAAGpB,OAAO,CAACgB,OAAR,CAAgBI,cAAvC;QACAL,qBAAqB,CAAC;UACpBT,cAAc,EAAdA,cADoB;UAEpBO,UAAU,EAAVA,UAFoB;UAGpBM,aAAa,EAAbA,aAHoB;UAIpBC,cAAc,EAAdA;QAJoB,CAAD,EAKlBpB,OALkB,CAArB;MAMD;IACF;;;;EA9CqBxB,I;;AAkDxB,eAAeS,SAAf"},"metadata":{},"sourceType":"module"}