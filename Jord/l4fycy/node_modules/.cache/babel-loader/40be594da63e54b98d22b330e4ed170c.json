{"ast":null,"code":"import _classCallCheck from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node from '../core/Node.js';\nimport ConstNode from '../core/ConstNode.js';\nimport UVNode from '../accessors/UVNode.js';\nimport MathNode from '../math/MathNode.js';\nimport OperatorNode from '../math/OperatorNode.js';\nimport SplitNode from './SplitNode.js';\nimport JoinNode from './JoinNode.js';\n\nvar SpriteSheetUVNode = /*#__PURE__*/function (_Node) {\n  _inherits(SpriteSheetUVNode, _Node);\n\n  var _super = _createSuper(SpriteSheetUVNode);\n\n  function SpriteSheetUVNode(countNode) {\n    var _this;\n\n    var uvNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new UVNode();\n    var frameNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new ConstNode(0);\n\n    _classCallCheck(this, SpriteSheetUVNode);\n\n    _this = _super.call(this, 'vec2');\n    _this.countNode = countNode;\n    _this.uvNode = uvNode;\n    _this.frameNode = frameNode;\n    return _this;\n  }\n\n  _createClass(SpriteSheetUVNode, [{\n    key: \"generate\",\n    value: function generate(builder) {\n      var count = this.countNode;\n      var uv = this.uvNode;\n      var frame = this.frameNode;\n      var one = new ConstNode(1);\n      var width = new SplitNode(count, 'x');\n      var height = new SplitNode(count, 'y');\n      var total = new OperatorNode('*', width, height);\n      var roundFrame = new MathNode(MathNode.FLOOR, new MathNode(MathNode.MOD, frame, total));\n      var frameNum = new OperatorNode('+', roundFrame, one);\n      var cell = new MathNode(MathNode.MOD, roundFrame, width);\n      var row = new MathNode(MathNode.CEIL, new OperatorNode('/', frameNum, width));\n      var rowInv = new OperatorNode('-', height, row);\n      var scale = new OperatorNode('/', one, count);\n      var uvFrameOffset = new JoinNode([new OperatorNode('*', cell, new SplitNode(scale, 'x')), new OperatorNode('*', rowInv, new SplitNode(scale, 'y'))]);\n      var uvScale = new OperatorNode('*', uv, scale);\n      var uvFrame = new OperatorNode('+', uvScale, uvFrameOffset);\n      return uvFrame.build(builder, this.getNodeType(builder));\n    }\n  }]);\n\n  return SpriteSheetUVNode;\n}(Node);\n\nexport default SpriteSheetUVNode;","map":{"version":3,"names":["Node","ConstNode","UVNode","MathNode","OperatorNode","SplitNode","JoinNode","SpriteSheetUVNode","countNode","uvNode","frameNode","builder","count","uv","frame","one","width","height","total","roundFrame","FLOOR","MOD","frameNum","cell","row","CEIL","rowInv","scale","uvFrameOffset","uvScale","uvFrame","build","getNodeType"],"sources":["D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/three-stdlib/nodes/utils/SpriteSheetUVNode.js"],"sourcesContent":["import Node from '../core/Node.js';\r\nimport ConstNode from '../core/ConstNode.js';\r\nimport UVNode from '../accessors/UVNode.js';\r\nimport MathNode from '../math/MathNode.js';\r\nimport OperatorNode from '../math/OperatorNode.js';\r\nimport SplitNode from './SplitNode.js';\r\nimport JoinNode from './JoinNode.js';\r\n\r\nclass SpriteSheetUVNode extends Node {\r\n  constructor(countNode, uvNode = new UVNode(), frameNode = new ConstNode(0)) {\r\n    super('vec2');\r\n    this.countNode = countNode;\r\n    this.uvNode = uvNode;\r\n    this.frameNode = frameNode;\r\n  }\r\n\r\n  generate(builder) {\r\n    const count = this.countNode;\r\n    const uv = this.uvNode;\r\n    const frame = this.frameNode;\r\n    const one = new ConstNode(1);\r\n    const width = new SplitNode(count, 'x');\r\n    const height = new SplitNode(count, 'y');\r\n    const total = new OperatorNode('*', width, height);\r\n    const roundFrame = new MathNode(MathNode.FLOOR, new MathNode(MathNode.MOD, frame, total));\r\n    const frameNum = new OperatorNode('+', roundFrame, one);\r\n    const cell = new MathNode(MathNode.MOD, roundFrame, width);\r\n    const row = new MathNode(MathNode.CEIL, new OperatorNode('/', frameNum, width));\r\n    const rowInv = new OperatorNode('-', height, row);\r\n    const scale = new OperatorNode('/', one, count);\r\n    const uvFrameOffset = new JoinNode([new OperatorNode('*', cell, new SplitNode(scale, 'x')), new OperatorNode('*', rowInv, new SplitNode(scale, 'y'))]);\r\n    const uvScale = new OperatorNode('*', uv, scale);\r\n    const uvFrame = new OperatorNode('+', uvScale, uvFrameOffset);\r\n    return uvFrame.build(builder, this.getNodeType(builder));\r\n  }\r\n\r\n}\r\n\r\nexport default SpriteSheetUVNode;\r\n"],"mappings":";;;;AAAA,OAAOA,IAAP,MAAiB,iBAAjB;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAOC,QAAP,MAAqB,eAArB;;IAEMC,iB;;;;;EACJ,2BAAYC,SAAZ,EAA4E;IAAA;;IAAA,IAArDC,MAAqD,uEAA5C,IAAIP,MAAJ,EAA4C;IAAA,IAA9BQ,SAA8B,uEAAlB,IAAIT,SAAJ,CAAc,CAAd,CAAkB;;IAAA;;IAC1E,0BAAM,MAAN;IACA,MAAKO,SAAL,GAAiBA,SAAjB;IACA,MAAKC,MAAL,GAAcA,MAAd;IACA,MAAKC,SAAL,GAAiBA,SAAjB;IAJ0E;EAK3E;;;;WAED,kBAASC,OAAT,EAAkB;MAChB,IAAMC,KAAK,GAAG,KAAKJ,SAAnB;MACA,IAAMK,EAAE,GAAG,KAAKJ,MAAhB;MACA,IAAMK,KAAK,GAAG,KAAKJ,SAAnB;MACA,IAAMK,GAAG,GAAG,IAAId,SAAJ,CAAc,CAAd,CAAZ;MACA,IAAMe,KAAK,GAAG,IAAIX,SAAJ,CAAcO,KAAd,EAAqB,GAArB,CAAd;MACA,IAAMK,MAAM,GAAG,IAAIZ,SAAJ,CAAcO,KAAd,EAAqB,GAArB,CAAf;MACA,IAAMM,KAAK,GAAG,IAAId,YAAJ,CAAiB,GAAjB,EAAsBY,KAAtB,EAA6BC,MAA7B,CAAd;MACA,IAAME,UAAU,GAAG,IAAIhB,QAAJ,CAAaA,QAAQ,CAACiB,KAAtB,EAA6B,IAAIjB,QAAJ,CAAaA,QAAQ,CAACkB,GAAtB,EAA2BP,KAA3B,EAAkCI,KAAlC,CAA7B,CAAnB;MACA,IAAMI,QAAQ,GAAG,IAAIlB,YAAJ,CAAiB,GAAjB,EAAsBe,UAAtB,EAAkCJ,GAAlC,CAAjB;MACA,IAAMQ,IAAI,GAAG,IAAIpB,QAAJ,CAAaA,QAAQ,CAACkB,GAAtB,EAA2BF,UAA3B,EAAuCH,KAAvC,CAAb;MACA,IAAMQ,GAAG,GAAG,IAAIrB,QAAJ,CAAaA,QAAQ,CAACsB,IAAtB,EAA4B,IAAIrB,YAAJ,CAAiB,GAAjB,EAAsBkB,QAAtB,EAAgCN,KAAhC,CAA5B,CAAZ;MACA,IAAMU,MAAM,GAAG,IAAItB,YAAJ,CAAiB,GAAjB,EAAsBa,MAAtB,EAA8BO,GAA9B,CAAf;MACA,IAAMG,KAAK,GAAG,IAAIvB,YAAJ,CAAiB,GAAjB,EAAsBW,GAAtB,EAA2BH,KAA3B,CAAd;MACA,IAAMgB,aAAa,GAAG,IAAItB,QAAJ,CAAa,CAAC,IAAIF,YAAJ,CAAiB,GAAjB,EAAsBmB,IAAtB,EAA4B,IAAIlB,SAAJ,CAAcsB,KAAd,EAAqB,GAArB,CAA5B,CAAD,EAAyD,IAAIvB,YAAJ,CAAiB,GAAjB,EAAsBsB,MAAtB,EAA8B,IAAIrB,SAAJ,CAAcsB,KAAd,EAAqB,GAArB,CAA9B,CAAzD,CAAb,CAAtB;MACA,IAAME,OAAO,GAAG,IAAIzB,YAAJ,CAAiB,GAAjB,EAAsBS,EAAtB,EAA0Bc,KAA1B,CAAhB;MACA,IAAMG,OAAO,GAAG,IAAI1B,YAAJ,CAAiB,GAAjB,EAAsByB,OAAtB,EAA+BD,aAA/B,CAAhB;MACA,OAAOE,OAAO,CAACC,KAAR,CAAcpB,OAAd,EAAuB,KAAKqB,WAAL,CAAiBrB,OAAjB,CAAvB,CAAP;IACD;;;;EA1B6BX,I;;AA8BhC,eAAeO,iBAAf"},"metadata":{},"sourceType":"module"}