{"ast":null,"code":"import _classCallCheck from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport TempNode from '../core/TempNode.js';\n\nvar OperatorNode = /*#__PURE__*/function (_TempNode) {\n  _inherits(OperatorNode, _TempNode);\n\n  var _super = _createSuper(OperatorNode);\n\n  function OperatorNode(op, aNode, bNode) {\n    var _this;\n\n    _classCallCheck(this, OperatorNode);\n\n    _this = _super.call(this);\n    _this.op = op;\n\n    if ((arguments.length <= 3 ? 0 : arguments.length - 3) > 0) {\n      var finalBNode = bNode;\n\n      for (var i = 0; i < (arguments.length <= 3 ? 0 : arguments.length - 3); i++) {\n        finalBNode = new OperatorNode(op, finalBNode, i + 3 < 3 || arguments.length <= i + 3 ? undefined : arguments[i + 3]);\n      }\n\n      bNode = finalBNode;\n    }\n\n    _this.aNode = aNode;\n    _this.bNode = bNode;\n    return _this;\n  }\n\n  _createClass(OperatorNode, [{\n    key: \"getNodeType\",\n    value: function getNodeType(builder, output) {\n      var op = this.op;\n      var aNode = this.aNode;\n      var bNode = this.bNode;\n      var typeA = aNode.getNodeType(builder);\n      var typeB = bNode.getNodeType(builder);\n\n      if (typeA === 'void' || typeB === 'void') {\n        return 'void';\n      } else if (op === '=' || op === '%') {\n        return typeA;\n      } else if (op === '&' || op === '|' || op === '^' || op === '>>' || op === '<<') {\n        return 'int';\n      } else if (op === '==' || op === '&&' || op === '||' || op === '^^') {\n        return 'bool';\n      } else if (op === '<' || op === '>' || op === '<=' || op === '>=') {\n        var typeLength = builder.getTypeLength(output);\n        return typeLength > 1 ? \"bvec\".concat(typeLength) : 'bool';\n      } else {\n        if (typeA === 'float' && builder.isMatrix(typeB)) {\n          return typeB;\n        } else if (builder.isMatrix(typeA) && builder.isVector(typeB)) {\n          // matrix x vector\n          return builder.getVectorFromMatrix(typeA);\n        } else if (builder.isVector(typeA) && builder.isMatrix(typeB)) {\n          // vector x matrix\n          return builder.getVectorFromMatrix(typeB);\n        } else if (builder.getTypeLength(typeB) > builder.getTypeLength(typeA)) {\n          // anytype x anytype: use the greater length vector\n          return typeB;\n        }\n\n        return typeA;\n      }\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder, output) {\n      var op = this.op;\n      var aNode = this.aNode;\n      var bNode = this.bNode;\n      var type = this.getNodeType(builder, output);\n      var typeA = null;\n      var typeB = null;\n\n      if (type !== 'void') {\n        typeA = aNode.getNodeType(builder);\n        typeB = bNode.getNodeType(builder);\n\n        if (op === '=') {\n          typeB = typeA;\n        } else if (op === '<' || op === '>' || op === '<=' || op === '>=') {\n          if (builder.isVector(typeA)) {\n            typeB = typeA;\n          } else {\n            typeA = typeB = 'float';\n          }\n        } else if (builder.isMatrix(typeA) && builder.isVector(typeB)) {\n          // matrix x vector\n          typeB = builder.getVectorFromMatrix(typeA);\n        } else if (builder.isVector(typeA) && builder.isMatrix(typeB)) {\n          // vector x matrix\n          typeA = builder.getVectorFromMatrix(typeB);\n        } else {\n          // anytype x anytype\n          typeA = typeB = type;\n        }\n      } else {\n        typeA = typeB = type;\n      }\n\n      var a = aNode.build(builder, typeA);\n      var b = bNode.build(builder, typeB);\n      var outputLength = builder.getTypeLength(output);\n\n      if (output !== 'void') {\n        if (op === '=') {\n          builder.addFlowCode(\"\".concat(a, \" \").concat(this.op, \" \").concat(b));\n          return a;\n        } else if (op === '>' && outputLength > 1) {\n          return builder.format(\"\".concat(builder.getMethod('greaterThan'), \"( \").concat(a, \", \").concat(b, \" )\"), type, output);\n        } else if (op === '<=' && outputLength > 1) {\n          return builder.format(\"\".concat(builder.getMethod('lessThanEqual'), \"( \").concat(a, \", \").concat(b, \" )\"), type, output);\n        } else {\n          return builder.format(\"( \".concat(a, \" \").concat(this.op, \" \").concat(b, \" )\"), type, output);\n        }\n      } else if (typeA !== 'void') {\n        return builder.format(\"\".concat(a, \" \").concat(this.op, \" \").concat(b), type, output);\n      }\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(data) {\n      _get(_getPrototypeOf(OperatorNode.prototype), \"serialize\", this).call(this, data);\n\n      data.op = this.op;\n    }\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      _get(_getPrototypeOf(OperatorNode.prototype), \"deserialize\", this).call(this, data);\n\n      this.op = data.op;\n    }\n  }]);\n\n  return OperatorNode;\n}(TempNode);\n\nexport default OperatorNode;","map":{"version":3,"names":["TempNode","OperatorNode","op","aNode","bNode","finalBNode","i","builder","output","typeA","getNodeType","typeB","typeLength","getTypeLength","isMatrix","isVector","getVectorFromMatrix","type","a","build","b","outputLength","addFlowCode","format","getMethod","data"],"sources":["D:/Github/NIKE-DJANGO/Jord/l4fycy/node_modules/three-stdlib/nodes/math/OperatorNode.js"],"sourcesContent":["import TempNode from '../core/TempNode.js';\r\n\r\nclass OperatorNode extends TempNode {\r\n  constructor(op, aNode, bNode, ...params) {\r\n    super();\r\n    this.op = op;\r\n\r\n    if (params.length > 0) {\r\n      let finalBNode = bNode;\r\n\r\n      for (let i = 0; i < params.length; i++) {\r\n        finalBNode = new OperatorNode(op, finalBNode, params[i]);\r\n      }\r\n\r\n      bNode = finalBNode;\r\n    }\r\n\r\n    this.aNode = aNode;\r\n    this.bNode = bNode;\r\n  }\r\n\r\n  getNodeType(builder, output) {\r\n    const op = this.op;\r\n    const aNode = this.aNode;\r\n    const bNode = this.bNode;\r\n    const typeA = aNode.getNodeType(builder);\r\n    const typeB = bNode.getNodeType(builder);\r\n\r\n    if (typeA === 'void' || typeB === 'void') {\r\n      return 'void';\r\n    } else if (op === '=' || op === '%') {\r\n      return typeA;\r\n    } else if (op === '&' || op === '|' || op === '^' || op === '>>' || op === '<<') {\r\n      return 'int';\r\n    } else if (op === '==' || op === '&&' || op === '||' || op === '^^') {\r\n      return 'bool';\r\n    } else if (op === '<' || op === '>' || op === '<=' || op === '>=') {\r\n      const typeLength = builder.getTypeLength(output);\r\n      return typeLength > 1 ? `bvec${typeLength}` : 'bool';\r\n    } else {\r\n      if (typeA === 'float' && builder.isMatrix(typeB)) {\r\n        return typeB;\r\n      } else if (builder.isMatrix(typeA) && builder.isVector(typeB)) {\r\n        // matrix x vector\r\n        return builder.getVectorFromMatrix(typeA);\r\n      } else if (builder.isVector(typeA) && builder.isMatrix(typeB)) {\r\n        // vector x matrix\r\n        return builder.getVectorFromMatrix(typeB);\r\n      } else if (builder.getTypeLength(typeB) > builder.getTypeLength(typeA)) {\r\n        // anytype x anytype: use the greater length vector\r\n        return typeB;\r\n      }\r\n\r\n      return typeA;\r\n    }\r\n  }\r\n\r\n  generate(builder, output) {\r\n    const op = this.op;\r\n    const aNode = this.aNode;\r\n    const bNode = this.bNode;\r\n    const type = this.getNodeType(builder, output);\r\n    let typeA = null;\r\n    let typeB = null;\r\n\r\n    if (type !== 'void') {\r\n      typeA = aNode.getNodeType(builder);\r\n      typeB = bNode.getNodeType(builder);\r\n\r\n      if (op === '=') {\r\n        typeB = typeA;\r\n      } else if (op === '<' || op === '>' || op === '<=' || op === '>=') {\r\n        if (builder.isVector(typeA)) {\r\n          typeB = typeA;\r\n        } else {\r\n          typeA = typeB = 'float';\r\n        }\r\n      } else if (builder.isMatrix(typeA) && builder.isVector(typeB)) {\r\n        // matrix x vector\r\n        typeB = builder.getVectorFromMatrix(typeA);\r\n      } else if (builder.isVector(typeA) && builder.isMatrix(typeB)) {\r\n        // vector x matrix\r\n        typeA = builder.getVectorFromMatrix(typeB);\r\n      } else {\r\n        // anytype x anytype\r\n        typeA = typeB = type;\r\n      }\r\n    } else {\r\n      typeA = typeB = type;\r\n    }\r\n\r\n    const a = aNode.build(builder, typeA);\r\n    const b = bNode.build(builder, typeB);\r\n    const outputLength = builder.getTypeLength(output);\r\n\r\n    if (output !== 'void') {\r\n      if (op === '=') {\r\n        builder.addFlowCode(`${a} ${this.op} ${b}`);\r\n        return a;\r\n      } else if (op === '>' && outputLength > 1) {\r\n        return builder.format(`${builder.getMethod('greaterThan')}( ${a}, ${b} )`, type, output);\r\n      } else if (op === '<=' && outputLength > 1) {\r\n        return builder.format(`${builder.getMethod('lessThanEqual')}( ${a}, ${b} )`, type, output);\r\n      } else {\r\n        return builder.format(`( ${a} ${this.op} ${b} )`, type, output);\r\n      }\r\n    } else if (typeA !== 'void') {\r\n      return builder.format(`${a} ${this.op} ${b}`, type, output);\r\n    }\r\n  }\r\n\r\n  serialize(data) {\r\n    super.serialize(data);\r\n    data.op = this.op;\r\n  }\r\n\r\n  deserialize(data) {\r\n    super.deserialize(data);\r\n    this.op = data.op;\r\n  }\r\n\r\n}\r\n\r\nexport default OperatorNode;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}