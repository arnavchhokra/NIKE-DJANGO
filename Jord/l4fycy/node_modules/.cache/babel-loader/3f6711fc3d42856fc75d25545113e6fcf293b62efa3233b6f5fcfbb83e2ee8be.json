{"ast":null,"code":"import { Vector3 } from 'three';\nimport { intersectRay } from '../utils/intersectUtils.js';\nimport { IS_LEAF, OFFSET, COUNT, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { intersectTris } from '../utils/iterationUtils.generated.js';\nimport '../utils/iterationUtils_indirect.generated.js';\n\n/******************************************************/\n/* This file is generated from \"raycast.template.js\". */\n/******************************************************/\n\nconst _boxIntersection = /* @__PURE__ */new Vector3();\nfunction raycast(bvh, root, side, ray, intersects) {\n  BufferStack.setBuffer(bvh._roots[root]);\n  _raycast(0, bvh, side, ray, intersects);\n  BufferStack.clearBuffer();\n}\nfunction _raycast(nodeIndex32, bvh, side, ray, intersects) {\n  const {\n    float32Array,\n    uint16Array,\n    uint32Array\n  } = BufferStack;\n  const nodeIndex16 = nodeIndex32 * 2;\n  const isLeaf = IS_LEAF(nodeIndex16, uint16Array);\n  if (isLeaf) {\n    const offset = OFFSET(nodeIndex32, uint32Array);\n    const count = COUNT(nodeIndex16, uint16Array);\n    intersectTris(bvh, side, ray, offset, count, intersects);\n  } else {\n    const leftIndex = LEFT_NODE(nodeIndex32);\n    if (intersectRay(leftIndex, float32Array, ray, _boxIntersection)) {\n      _raycast(leftIndex, bvh, side, ray, intersects);\n    }\n    const rightIndex = RIGHT_NODE(nodeIndex32, uint32Array);\n    if (intersectRay(rightIndex, float32Array, ray, _boxIntersection)) {\n      _raycast(rightIndex, bvh, side, ray, intersects);\n    }\n  }\n}\nexport { raycast };","map":{"version":3,"names":["Vector3","intersectRay","IS_LEAF","OFFSET","COUNT","LEFT_NODE","RIGHT_NODE","BufferStack","intersectTris","_boxIntersection","raycast","bvh","root","side","ray","intersects","setBuffer","_roots","_raycast","clearBuffer","nodeIndex32","float32Array","uint16Array","uint32Array","nodeIndex16","isLeaf","offset","count","leftIndex","rightIndex"],"sources":["D:/Repos/NIKE-DJANGO/Jord/l4fycy/node_modules/three-mesh-bvh/src/core/cast/raycast.generated.js"],"sourcesContent":["import { Vector3 } from 'three';\r\nimport { intersectRay } from '../utils/intersectUtils.js';\r\nimport { IS_LEAF, OFFSET, COUNT, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\r\nimport { BufferStack } from '../utils/BufferStack.js';\r\nimport { intersectTris } from '../utils/iterationUtils.generated.js';\r\nimport '../utils/iterationUtils_indirect.generated.js';\r\n\r\n/******************************************************/\r\n/* This file is generated from \"raycast.template.js\". */\r\n/******************************************************/\r\n\r\nconst _boxIntersection = /* @__PURE__ */ new Vector3();\r\nfunction raycast( bvh, root, side, ray, intersects ) {\r\n\r\n\tBufferStack.setBuffer( bvh._roots[ root ] );\r\n\t_raycast( 0, bvh, side, ray, intersects );\r\n\tBufferStack.clearBuffer();\r\n\r\n}\r\n\r\nfunction _raycast( nodeIndex32, bvh, side, ray, intersects ) {\r\n\r\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\r\n\tconst nodeIndex16 = nodeIndex32 * 2;\r\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\r\n\tif ( isLeaf ) {\r\n\r\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\r\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\r\n\r\n\r\n\t\tintersectTris( bvh, side, ray, offset, count, intersects );\r\n\r\n\r\n\t} else {\r\n\r\n\t\tconst leftIndex = LEFT_NODE( nodeIndex32 );\r\n\t\tif ( intersectRay( leftIndex, float32Array, ray, _boxIntersection ) ) {\r\n\r\n\t\t\t_raycast( leftIndex, bvh, side, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t\tconst rightIndex = RIGHT_NODE( nodeIndex32, uint32Array );\r\n\t\tif ( intersectRay( rightIndex, float32Array, ray, _boxIntersection ) ) {\r\n\r\n\t\t\t_raycast( rightIndex, bvh, side, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { raycast };\r\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,OAAO;AAC/B,SAASC,YAAY,QAAQ,4BAA4B;AACzD,SAASC,OAAO,EAAEC,MAAM,EAAEC,KAAK,EAAEC,SAAS,EAAEC,UAAU,QAAQ,6BAA6B;AAC3F,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,aAAa,QAAQ,sCAAsC;AACpE,OAAO,+CAA+C;;AAEtD;AACA;AACA;;AAEA,MAAMC,gBAAgB,GAAG,eAAgB,IAAIT,OAAO,CAAC,CAAC;AACtD,SAASU,OAAOA,CAAEC,GAAG,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAEC,UAAU,EAAG;EAEpDR,WAAW,CAACS,SAAS,CAAEL,GAAG,CAACM,MAAM,CAAEL,IAAI,CAAG,CAAC;EAC3CM,QAAQ,CAAE,CAAC,EAAEP,GAAG,EAAEE,IAAI,EAAEC,GAAG,EAAEC,UAAW,CAAC;EACzCR,WAAW,CAACY,WAAW,CAAC,CAAC;AAE1B;AAEA,SAASD,QAAQA,CAAEE,WAAW,EAAET,GAAG,EAAEE,IAAI,EAAEC,GAAG,EAAEC,UAAU,EAAG;EAE5D,MAAM;IAAEM,YAAY;IAAEC,WAAW;IAAEC;EAAY,CAAC,GAAGhB,WAAW;EAC9D,MAAMiB,WAAW,GAAGJ,WAAW,GAAG,CAAC;EACnC,MAAMK,MAAM,GAAGvB,OAAO,CAAEsB,WAAW,EAAEF,WAAY,CAAC;EAClD,IAAKG,MAAM,EAAG;IAEb,MAAMC,MAAM,GAAGvB,MAAM,CAAEiB,WAAW,EAAEG,WAAY,CAAC;IACjD,MAAMI,KAAK,GAAGvB,KAAK,CAAEoB,WAAW,EAAEF,WAAY,CAAC;IAG/Cd,aAAa,CAAEG,GAAG,EAAEE,IAAI,EAAEC,GAAG,EAAEY,MAAM,EAAEC,KAAK,EAAEZ,UAAW,CAAC;EAG3D,CAAC,MAAM;IAEN,MAAMa,SAAS,GAAGvB,SAAS,CAAEe,WAAY,CAAC;IAC1C,IAAKnB,YAAY,CAAE2B,SAAS,EAAEP,YAAY,EAAEP,GAAG,EAAEL,gBAAiB,CAAC,EAAG;MAErES,QAAQ,CAAEU,SAAS,EAAEjB,GAAG,EAAEE,IAAI,EAAEC,GAAG,EAAEC,UAAW,CAAC;IAElD;IAEA,MAAMc,UAAU,GAAGvB,UAAU,CAAEc,WAAW,EAAEG,WAAY,CAAC;IACzD,IAAKtB,YAAY,CAAE4B,UAAU,EAAER,YAAY,EAAEP,GAAG,EAAEL,gBAAiB,CAAC,EAAG;MAEtES,QAAQ,CAAEW,UAAU,EAAElB,GAAG,EAAEE,IAAI,EAAEC,GAAG,EAAEC,UAAW,CAAC;IAEnD;EAED;AAED;AAEA,SAASL,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}